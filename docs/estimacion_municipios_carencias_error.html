<!DOCTYPE html>
<html lang="es" xml:lang="es">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>18_estimacion_municipios_carencias_error.R | Manual de procesamiento del indicador de pobreza multidimensional mediante el uso de estimación de áreas pequeñas para México 2020</title>
  <meta name="description" content="Manual de procesamiento." />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="18_estimacion_municipios_carencias_error.R | Manual de procesamiento del indicador de pobreza multidimensional mediante el uso de estimación de áreas pequeñas para México 2020" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Manual de procesamiento." />
  <meta name="github-repo" content="psirusteam/coneval" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="18_estimacion_municipios_carencias_error.R | Manual de procesamiento del indicador de pobreza multidimensional mediante el uso de estimación de áreas pequeñas para México 2020" />
  
  <meta name="twitter:description" content="Manual de procesamiento." />
  

<meta name="author" content="Andrés Gutiérrez, Stalyn Guerrero" />


<meta name="date" content="2024-07-30" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="estimacion_municipios_carencias.html"/>
<link rel="next" href="mapas_carencias.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Manual de procesamiento.</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introducción</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#respositodio-de-códigos"><i class="fa fa-check"></i>Respositodio de códigos</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#estructura-del-proyecto"><i class="fa fa-check"></i>Estructura del Proyecto</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#librerias-de-r-y-otros-insumos"><i class="fa fa-check"></i>Librerias de <em>R</em> y otros insumos</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#bases-de-datos-utilizadas"><i class="fa fa-check"></i>Bases de Datos Utilizadas</a></li>
<li class="chapter" data-level="" data-path="indicadores-estimados.html"><a href="indicadores-estimados.html"><i class="fa fa-check"></i>Indicadores estimados</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="union_bases.html"><a href="union_bases.html"><i class="fa fa-check"></i>00_union_bases.R</a></li>
<li class="chapter" data-level="" data-path="descarga_satelitales.html"><a href="descarga_satelitales.html"><i class="fa fa-check"></i>01_Descarga_satelitales.R</a></li>
<li class="chapter" data-level="" data-path="union_predictores.html"><a href="union_predictores.html"><i class="fa fa-check"></i>02_Union_predictores.R</a>
<ul>
<li class="chapter" data-level="0.0.1" data-path="union_predictores.html"><a href="union_predictores.html#configuración-inicial-y-carga-de-librerías"><i class="fa fa-check"></i><b>0.0.1</b> Configuración Inicial y Carga de Librerías</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="estandarizar_muestra_cuestionario_ampliado.html"><a href="estandarizar_muestra_cuestionario_ampliado.html"><i class="fa fa-check"></i>03_Estandarizar_muestra_cuestionario_ampliado.R</a>
<ul>
<li class="chapter" data-level="" data-path="estandarizar_muestra_cuestionario_ampliado.html"><a href="estandarizar_muestra_cuestionario_ampliado.html#resumen-y-guardado-de-datos-agrupados"><i class="fa fa-check"></i>Resumen y Guardado de Datos Agrupados</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="armonizar_encuesta.html"><a href="armonizar_encuesta.html"><i class="fa fa-check"></i>04_Armonizar_encuesta.R</a></li>
<li class="chapter" data-level="" data-path="validacion_encuestas.html"><a href="validacion_encuestas.html"><i class="fa fa-check"></i>05_Validacion_encuestas.R</a></li>
<li class="chapter" data-level="" data-path="modelo_unidad_ictpc.html"><a href="modelo_unidad_ictpc.html"><i class="fa fa-check"></i>06_Modelo_unidad_ictpc.R</a></li>
<li class="chapter" data-level="" data-path="modelo_unidad_py_ic_ali_nc.html"><a href="modelo_unidad_py_ic_ali_nc.html"><i class="fa fa-check"></i>07_Modelo_unidad_py_ic_ali_nc.R</a></li>
<li class="chapter" data-level="" data-path="modelo_unidad_py_ic_segsoc.html"><a href="modelo_unidad_py_ic_segsoc.html"><i class="fa fa-check"></i>08_Modelo_unidad_py_ic_segsoc</a></li>
<li class="chapter" data-level="" data-path="postbenchmarking_ictpc.html"><a href="postbenchmarking_ictpc.html"><i class="fa fa-check"></i>09_PostBenchmarking_ictpc.R</a></li>
<li class="chapter" data-level="" data-path="postbenchmarking_ic_ali_nc.html"><a href="postbenchmarking_ic_ali_nc.html"><i class="fa fa-check"></i>10_PostBenchmarking_ic_ali_nc.R</a></li>
<li class="chapter" data-level="" data-path="postbenchmarking_ic_segsoc.html"><a href="postbenchmarking_ic_segsoc.html"><i class="fa fa-check"></i>11_PostBenchmarking_ic_segsoc.r</a></li>
<li class="chapter" data-level="" data-path="imputacion_censal.html"><a href="imputacion_censal.html"><i class="fa fa-check"></i>12_Imputacion_censal.R</a></li>
<li class="chapter" data-level="" data-path="estimacion_ent_02.html"><a href="estimacion_ent_02.html"><i class="fa fa-check"></i>13_Estimacion_ent_02.R</a></li>
<li class="chapter" data-level="" data-path="estimacion_municipios_ipm_pobreza.html"><a href="estimacion_municipios_ipm_pobreza.html"><i class="fa fa-check"></i>14_estimacion_municipios_ipm_pobreza.R</a></li>
<li class="chapter" data-level="" data-path="estimacion_municipios_ipm_pobreza_error.html"><a href="estimacion_municipios_ipm_pobreza_error.html"><i class="fa fa-check"></i>15_estimacion_municipios_ipm_pobreza_error.R</a></li>
<li class="chapter" data-level="" data-path="mapas.html"><a href="mapas.html"><i class="fa fa-check"></i>16_Mapas.R</a></li>
<li class="chapter" data-level="" data-path="estimacion_municipios_carencias.html"><a href="estimacion_municipios_carencias.html"><i class="fa fa-check"></i>17_estimacion_municipios_carencias.R</a></li>
<li class="chapter" data-level="" data-path="estimacion_municipios_carencias_error.html"><a href="estimacion_municipios_carencias_error.html"><i class="fa fa-check"></i>18_estimacion_municipios_carencias_error.R</a></li>
<li class="chapter" data-level="" data-path="mapas_carencias.html"><a href="mapas_carencias.html"><i class="fa fa-check"></i>19_Mapas_carencias.R</a></li>
<li class="chapter" data-level="" data-path="estimacion_directa_carencias.html"><a href="estimacion_directa_carencias.html"><i class="fa fa-check"></i>20_estimacion_directa_carencias.R</a></li>
<li class="divider"></li>
<li><a Manual de procesamiento. </a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Manual de procesamiento del indicador de pobreza multidimensional mediante el uso de estimación de áreas pequeñas para México 2020</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="estimacion_municipios_carencias_error.r" class="section level1 unnumbered hasAnchor">
<h1>18_estimacion_municipios_carencias_error.R<a href="estimacion_municipios_carencias_error.html#estimacion_municipios_carencias_error.r" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Para la ejecución del presente análisis, se debe abrir el archivo <strong>18_estimacion_municipios_carencias_error.R</strong> disponible en la ruta <em>Rcodes/2020/18_estimacion_municipios_carencias_error.R</em>.</p>
<p>Este script en R está diseñado para procesar y analizar datos de encuestas sobre pobreza en México para el año 2020. El código comienza limpiando el entorno de trabajo con <code>rm(list = ls())</code> y cargando las bibliotecas necesarias (<code>tidyverse</code>, <code>magrittr</code>, <code>survey</code>, <code>srvyr</code>, <code>tidyselect</code>) para la manipulación de datos y análisis estadístico.</p>
<p>La primera sección del script se enfoca en la lectura de datos. Se cargan dos conjuntos de datos usando <code>readRDS()</code>: <code>encuesta_ampliada</code> y <code>encuesta_enigh</code>, este último con una modificación en la columna <code>ingreso</code>. También se lee un archivo CSV con <code>read.delim()</code>, que contiene datos sobre las líneas de bienestar, y se convierte la columna <code>area</code> a formato de carácter.</p>
<p>En la sección del Índice de Pobreza Multidimensional en la encuesta ENIGH, se realiza una combinación interna (<code>inner_join()</code>) entre <code>encuesta_enigh</code> y <code>LB</code> para añadir variables relacionadas con carencias sociales y pobreza. Se crean nuevas variables en <code>encuesta_enigh</code>, tales como <code>tol_ic</code> (suma de indicadores de carencia social), <code>pobrea_lp</code> (indicador de pobreza por ingresos) y <code>pobrea_li</code> (indicador de pobreza extrema por ingresos). Además, se genera un resumen del número de personas por municipio en <code>N_mpio</code>. A continuación, el script lee una lista de archivos de estimación de carencia desde un directorio específico, y procesa estos archivos para calcular diversas estadísticas como media, varianza y errores estándar de las estimaciones. Utiliza la función <code>map_df()</code> para combinar datos de múltiples archivos, y realiza cálculos de varianza y errores estándar para cada indicador de pobreza. Los resultados se almacenan en una lista y se combinan en un único marco de datos.</p>
<p>Los resultados combinados (<code>temp</code>) se enriquecen con información de población de <code>N_mpio</code> y se guardan en archivos RDS y Excel utilizando <code>saveRDS()</code> y <code>write.xlsx()</code>. Se calcula también un resumen a nivel estatal, agregando los resultados por entidad. En la última sección del script, se realiza un análisis gráfico de las estimaciones de pobreza. Se convierte <code>encuesta_enigh</code> en un diseño de encuesta usando <code>as_survey_design()</code>, y se calculan las estimaciones de pobreza por entidad. Luego, se generan gráficos con <code>ggplot2</code> para comparar las estimaciones de carencia entre los datos de la encuesta ENIGH y las estimaciones de CEPAL. Los gráficos se guardan como archivos PNG utilizando <code>ggsave()</code>.</p>
<div id="limpieza-del-entorno-y-carga-de-bibliotecas-8" class="section level4 unnumbered hasAnchor">
<h4>Limpieza del Entorno y Carga de Bibliotecas<a href="estimacion_municipios_carencias_error.html#limpieza-del-entorno-y-carga-de-bibliotecas-8" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Se limpia el entorno de trabajo y se cargan las bibliotecas necesarias para la manipulación de datos y la visualización.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="estimacion_municipios_carencias_error.html#cb127-1" tabindex="-1"></a>   <span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb127-2"><a href="estimacion_municipios_carencias_error.html#cb127-2" tabindex="-1"></a>   <span class="fu">library</span>(tidyverse)</span>
<span id="cb127-3"><a href="estimacion_municipios_carencias_error.html#cb127-3" tabindex="-1"></a>   <span class="fu">library</span>(magrittr)</span>
<span id="cb127-4"><a href="estimacion_municipios_carencias_error.html#cb127-4" tabindex="-1"></a>   <span class="fu">library</span>(survey)</span>
<span id="cb127-5"><a href="estimacion_municipios_carencias_error.html#cb127-5" tabindex="-1"></a>   <span class="fu">library</span>(srvyr)</span>
<span id="cb127-6"><a href="estimacion_municipios_carencias_error.html#cb127-6" tabindex="-1"></a>   <span class="fu">library</span>(tidyselect)</span></code></pre></div>
</div>
<div id="lectura-de-datos-5" class="section level4 unnumbered hasAnchor">
<h4>Lectura de Datos<a href="estimacion_municipios_carencias_error.html#lectura-de-datos-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Se cargan los datos de las encuestas y las líneas de bienestar desde archivos RDS y CSV.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="estimacion_municipios_carencias_error.html#cb128-1" tabindex="-1"></a>encuesta_ampliada <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;../../output/2020/encuesta_ampliada.rds&quot;</span>)</span>
<span id="cb128-2"><a href="estimacion_municipios_carencias_error.html#cb128-2" tabindex="-1"></a>encuesta_enigh <span class="ot">&lt;-</span></span>
<span id="cb128-3"><a href="estimacion_municipios_carencias_error.html#cb128-3" tabindex="-1"></a>  <span class="fu">readRDS</span>(<span class="st">&quot;../input/2020/enigh/encuesta_sta.rds&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb128-4"><a href="estimacion_municipios_carencias_error.html#cb128-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ingreso =</span> ictpc)</span>
<span id="cb128-5"><a href="estimacion_municipios_carencias_error.html#cb128-5" tabindex="-1"></a></span>
<span id="cb128-6"><a href="estimacion_municipios_carencias_error.html#cb128-6" tabindex="-1"></a>LB <span class="ot">&lt;-</span></span>
<span id="cb128-7"><a href="estimacion_municipios_carencias_error.html#cb128-7" tabindex="-1"></a>  <span class="fu">read.delim</span>(</span>
<span id="cb128-8"><a href="estimacion_municipios_carencias_error.html#cb128-8" tabindex="-1"></a>    <span class="st">&quot;../input/2020/Lineas_Bienestar.csv&quot;</span>,</span>
<span id="cb128-9"><a href="estimacion_municipios_carencias_error.html#cb128-9" tabindex="-1"></a>    <span class="at">header =</span> <span class="cn">TRUE</span>,</span>
<span id="cb128-10"><a href="estimacion_municipios_carencias_error.html#cb128-10" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">&quot;;&quot;</span>,</span>
<span id="cb128-11"><a href="estimacion_municipios_carencias_error.html#cb128-11" tabindex="-1"></a>    <span class="at">dec =</span> <span class="st">&quot;,&quot;</span></span>
<span id="cb128-12"><a href="estimacion_municipios_carencias_error.html#cb128-12" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb128-13"><a href="estimacion_municipios_carencias_error.html#cb128-13" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">area =</span> <span class="fu">as.character</span>(area))</span></code></pre></div>
</div>
<div id="cálculo-de-indicadores-de-pobreza" class="section level4 unnumbered hasAnchor">
<h4>Cálculo de Indicadores de Pobreza<a href="estimacion_municipios_carencias_error.html#cálculo-de-indicadores-de-pobreza" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Se calculan varios indicadores de pobreza basados en el ingreso y las carencias sociales.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="estimacion_municipios_carencias_error.html#cb129-1" tabindex="-1"></a>encuesta_enigh <span class="ot">&lt;-</span> encuesta_enigh <span class="sc">%&gt;%</span> <span class="fu">inner_join</span>(LB) <span class="sc">%&gt;%</span></span>
<span id="cb129-2"><a href="estimacion_municipios_carencias_error.html#cb129-2" tabindex="-1"></a><span class="fu">mutate</span>(</span>
<span id="cb129-3"><a href="estimacion_municipios_carencias_error.html#cb129-3" tabindex="-1"></a><span class="at">tol_ic =</span> ic_segsoc <span class="sc">+</span> ic_ali_nc <span class="sc">+</span> ic_asalud <span class="sc">+</span> ic_cv <span class="sc">+</span> ic_sbv <span class="sc">+</span> ic_rezedu,</span>
<span id="cb129-4"><a href="estimacion_municipios_carencias_error.html#cb129-4" tabindex="-1"></a><span class="at">pobrea_lp =</span> <span class="fu">ifelse</span>(ingreso <span class="sc">&lt;</span> lp, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb129-5"><a href="estimacion_municipios_carencias_error.html#cb129-5" tabindex="-1"></a><span class="at">pobrea_li =</span> <span class="fu">ifelse</span>(ingreso <span class="sc">&lt;</span> li, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb129-6"><a href="estimacion_municipios_carencias_error.html#cb129-6" tabindex="-1"></a><span class="at">tol_ic_1 =</span> <span class="fu">ifelse</span>(tol_ic <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb129-7"><a href="estimacion_municipios_carencias_error.html#cb129-7" tabindex="-1"></a><span class="at">tol_ic_2 =</span> <span class="fu">ifelse</span>(tol_ic <span class="sc">&gt;</span> <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb129-8"><a href="estimacion_municipios_carencias_error.html#cb129-8" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="procesamiento-de-resultados-iterativos" class="section level4 unnumbered hasAnchor">
<h4>Procesamiento de Resultados Iterativos<a href="estimacion_municipios_carencias_error.html#procesamiento-de-resultados-iterativos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Se listan y procesan los directorios que contienen resultados iterativos.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="estimacion_municipios_carencias_error.html#cb130-1" tabindex="-1"></a>   list_estiacion <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">&quot;../../output/2020/iteraciones/mpio_calib_carencia//&quot;</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb130-2"><a href="estimacion_municipios_carencias_error.html#cb130-2" tabindex="-1"></a>   list_estiacion <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(list_estiacion, <span class="at">iter =</span> list_estiacion <span class="sc">%&gt;%</span> <span class="fu">map_dbl</span>(<span class="sc">~</span><span class="fu">list.files</span>(.x) <span class="sc">%&gt;%</span> <span class="fu">length</span>())) <span class="sc">%&gt;%</span></span>
<span id="cb130-3"><a href="estimacion_municipios_carencias_error.html#cb130-3" tabindex="-1"></a>     <span class="fu">filter</span>(iter <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb130-4"><a href="estimacion_municipios_carencias_error.html#cb130-4" tabindex="-1"></a></span>
<span id="cb130-5"><a href="estimacion_municipios_carencias_error.html#cb130-5" tabindex="-1"></a>   resul_ent_ipm <span class="ot">&lt;-</span> <span class="fu">list</span>()</span></code></pre></div>
</div>
<div id="combinación-de-resultados-iterativos" class="section level4 unnumbered hasAnchor">
<h4>Combinación de Resultados Iterativos<a href="estimacion_municipios_carencias_error.html#combinación-de-resultados-iterativos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Se combinan los resultados de las iteraciones en un único conjunto de datos.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="estimacion_municipios_carencias_error.html#cb131-1" tabindex="-1"></a><span class="cf">for</span> (ii_ent <span class="cf">in</span> list_estiacion<span class="sc">$</span>list_estiacion) {</span>
<span id="cb131-2"><a href="estimacion_municipios_carencias_error.html#cb131-2" tabindex="-1"></a>  archivos <span class="ot">&lt;-</span> <span class="fu">list.files</span>(ii_ent, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb131-3"><a href="estimacion_municipios_carencias_error.html#cb131-3" tabindex="-1"></a>  datos <span class="ot">&lt;-</span> <span class="fu">map_df</span>(archivos, <span class="sc">~</span> <span class="fu">readRDS</span>(.x)<span class="sc">$</span>estima_calib)</span>
<span id="cb131-4"><a href="estimacion_municipios_carencias_error.html#cb131-4" tabindex="-1"></a>  </span>
<span id="cb131-5"><a href="estimacion_municipios_carencias_error.html#cb131-5" tabindex="-1"></a>  dat_estima <span class="ot">&lt;-</span></span>
<span id="cb131-6"><a href="estimacion_municipios_carencias_error.html#cb131-6" tabindex="-1"></a>    datos <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(cve_mun) <span class="sc">%&gt;%</span> <span class="fu">summarise_at</span>(<span class="fu">vars</span>(<span class="sc">!</span><span class="fu">matches</span>(<span class="st">&quot;var&quot;</span>)), mean) <span class="sc">%&gt;%</span> <span class="fu">data.frame</span>()</span>
<span id="cb131-7"><a href="estimacion_municipios_carencias_error.html#cb131-7" tabindex="-1"></a>  dat_n <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(cve_mun) <span class="sc">%&gt;%</span> <span class="fu">tally</span>()</span>
<span id="cb131-8"><a href="estimacion_municipios_carencias_error.html#cb131-8" tabindex="-1"></a>  dat_B <span class="ot">&lt;-</span></span>
<span id="cb131-9"><a href="estimacion_municipios_carencias_error.html#cb131-9" tabindex="-1"></a>    datos <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(cve_mun) <span class="sc">%&gt;%</span> <span class="fu">summarise_at</span>(<span class="fu">vars</span>(<span class="sc">!</span><span class="fu">matches</span>(<span class="st">&quot;var&quot;</span>)), var) <span class="sc">%&gt;%</span> <span class="fu">data.frame</span>()</span>
<span id="cb131-10"><a href="estimacion_municipios_carencias_error.html#cb131-10" tabindex="-1"></a>  </span>
<span id="cb131-11"><a href="estimacion_municipios_carencias_error.html#cb131-11" tabindex="-1"></a>  dat_Ubar <span class="ot">&lt;-</span></span>
<span id="cb131-12"><a href="estimacion_municipios_carencias_error.html#cb131-12" tabindex="-1"></a>    datos <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(cve_mun) <span class="sc">%&gt;%</span> <span class="fu">summarise_at</span>(<span class="fu">vars</span>(<span class="fu">matches</span>(<span class="st">&quot;var&quot;</span>)), mean) <span class="sc">%&gt;%</span> <span class="fu">data.frame</span>()</span>
<span id="cb131-13"><a href="estimacion_municipios_carencias_error.html#cb131-13" tabindex="-1"></a>  <span class="fu">names</span>(dat_Ubar) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;_var&quot;</span>, <span class="st">&quot;&quot;</span>, <span class="fu">names</span>(dat_Ubar))</span>
<span id="cb131-14"><a href="estimacion_municipios_carencias_error.html#cb131-14" tabindex="-1"></a>  </span>
<span id="cb131-15"><a href="estimacion_municipios_carencias_error.html#cb131-15" tabindex="-1"></a>  dat_var <span class="ot">&lt;-</span></span>
<span id="cb131-16"><a href="estimacion_municipios_carencias_error.html#cb131-16" tabindex="-1"></a>    dat_B <span class="sc">%&gt;%</span> <span class="fu">gather</span>(<span class="at">key =</span> <span class="st">&quot;Indicador&quot;</span>, <span class="at">value =</span> <span class="st">&quot;B&quot;</span>, <span class="sc">-</span>cve_mun) <span class="sc">%&gt;%</span></span>
<span id="cb131-17"><a href="estimacion_municipios_carencias_error.html#cb131-17" tabindex="-1"></a>    <span class="fu">inner_join</span>(dat_Ubar <span class="sc">%&gt;%</span> <span class="fu">gather</span>(<span class="at">key =</span> <span class="st">&quot;Indicador&quot;</span>, <span class="at">value =</span> <span class="st">&quot;Ubar&quot;</span>, <span class="sc">-</span>cve_mun)) <span class="sc">%&gt;%</span></span>
<span id="cb131-18"><a href="estimacion_municipios_carencias_error.html#cb131-18" tabindex="-1"></a>    <span class="fu">inner_join</span>(dat_n)</span>
<span id="cb131-19"><a href="estimacion_municipios_carencias_error.html#cb131-19" tabindex="-1"></a>  </span>
<span id="cb131-20"><a href="estimacion_municipios_carencias_error.html#cb131-20" tabindex="-1"></a>  var_est <span class="ot">&lt;-</span></span>
<span id="cb131-21"><a href="estimacion_municipios_carencias_error.html#cb131-21" tabindex="-1"></a>    dat_var <span class="sc">%&gt;%</span> <span class="fu">transmute</span>(cve_mun,</span>
<span id="cb131-22"><a href="estimacion_municipios_carencias_error.html#cb131-22" tabindex="-1"></a>                          Indicador,</span>
<span id="cb131-23"><a href="estimacion_municipios_carencias_error.html#cb131-23" tabindex="-1"></a>                          <span class="at">var =</span> Ubar <span class="sc">+</span> (<span class="dv">1</span> <span class="sc">+</span> <span class="dv">1</span> <span class="sc">/</span> n) <span class="sc">*</span> B,</span>
<span id="cb131-24"><a href="estimacion_municipios_carencias_error.html#cb131-24" tabindex="-1"></a>                          <span class="at">ee =</span> <span class="fu">sqrt</span>(var)) <span class="sc">%&gt;%</span></span>
<span id="cb131-25"><a href="estimacion_municipios_carencias_error.html#cb131-25" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb131-26"><a href="estimacion_municipios_carencias_error.html#cb131-26" tabindex="-1"></a>      <span class="at">id_cols =</span> <span class="st">&quot;cve_mun&quot;</span>,</span>
<span id="cb131-27"><a href="estimacion_municipios_carencias_error.html#cb131-27" tabindex="-1"></a>      <span class="at">names_from =</span> <span class="st">&quot;Indicador&quot;</span>,</span>
<span id="cb131-28"><a href="estimacion_municipios_carencias_error.html#cb131-28" tabindex="-1"></a>      <span class="at">values_from =</span> <span class="fu">c</span>(<span class="st">&quot;var&quot;</span>, <span class="st">&quot;ee&quot;</span>),</span>
<span id="cb131-29"><a href="estimacion_municipios_carencias_error.html#cb131-29" tabindex="-1"></a>      <span class="at">values_fill =</span> <span class="dv">0</span></span>
<span id="cb131-30"><a href="estimacion_municipios_carencias_error.html#cb131-30" tabindex="-1"></a>    )</span>
<span id="cb131-31"><a href="estimacion_municipios_carencias_error.html#cb131-31" tabindex="-1"></a>  </span>
<span id="cb131-32"><a href="estimacion_municipios_carencias_error.html#cb131-32" tabindex="-1"></a>  dat_var <span class="ot">&lt;-</span></span>
<span id="cb131-33"><a href="estimacion_municipios_carencias_error.html#cb131-33" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb131-34"><a href="estimacion_municipios_carencias_error.html#cb131-34" tabindex="-1"></a>      <span class="at">data =</span> dat_var,</span>
<span id="cb131-35"><a href="estimacion_municipios_carencias_error.html#cb131-35" tabindex="-1"></a>      <span class="at">id_cols =</span> <span class="st">&quot;cve_mun&quot;</span>,</span>
<span id="cb131-36"><a href="estimacion_municipios_carencias_error.html#cb131-36" tabindex="-1"></a>      <span class="at">names_from =</span> <span class="st">&quot;Indicador&quot;</span>,</span>
<span id="cb131-37"><a href="estimacion_municipios_carencias_error.html#cb131-37" tabindex="-1"></a>      <span class="at">values_from =</span> <span class="fu">c</span>(<span class="st">&quot;B&quot;</span>, <span class="st">&quot;Ubar&quot;</span>),</span>
<span id="cb131-38"><a href="estimacion_municipios_carencias_error.html#cb131-38" tabindex="-1"></a>      <span class="at">values_fill =</span> <span class="dv">0</span></span>
<span id="cb131-39"><a href="estimacion_municipios_carencias_error.html#cb131-39" tabindex="-1"></a>    )</span>
<span id="cb131-40"><a href="estimacion_municipios_carencias_error.html#cb131-40" tabindex="-1"></a>  </span>
<span id="cb131-41"><a href="estimacion_municipios_carencias_error.html#cb131-41" tabindex="-1"></a>resul_ent_ipm[[ii_ent]] <span class="ot">&lt;-</span></span>
<span id="cb131-42"><a href="estimacion_municipios_carencias_error.html#cb131-42" tabindex="-1"></a>    dat_n <span class="sc">%&gt;%</span> <span class="fu">inner_join</span>(dat_estima) <span class="sc">%&gt;%</span> <span class="fu">inner_join</span>(dat_var) <span class="sc">%&gt;%</span> <span class="fu">inner_join</span>(var_est)</span>
<span id="cb131-43"><a href="estimacion_municipios_carencias_error.html#cb131-43" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="guardado-de-resultados" class="section level4 unnumbered hasAnchor">
<h4>Guardado de Resultados<a href="estimacion_municipios_carencias_error.html#guardado-de-resultados" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Se guardan los resultados combinados en archivos RDS y Excel.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="estimacion_municipios_carencias_error.html#cb132-1" tabindex="-1"></a>temp <span class="ot">&lt;-</span> resul_ent_ipm <span class="sc">%&gt;%</span> <span class="fu">bind_rows</span>()</span>
<span id="cb132-2"><a href="estimacion_municipios_carencias_error.html#cb132-2" tabindex="-1"></a>temp <span class="sc">%&lt;&gt;%</span> <span class="fu">inner_join</span>(N_mpio) <span class="sc">%&gt;%</span></span>
<span id="cb132-3"><a href="estimacion_municipios_carencias_error.html#cb132-3" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb132-4"><a href="estimacion_municipios_carencias_error.html#cb132-4" tabindex="-1"></a>    ent,</span>
<span id="cb132-5"><a href="estimacion_municipios_carencias_error.html#cb132-5" tabindex="-1"></a>    cve_mun,</span>
<span id="cb132-6"><a href="estimacion_municipios_carencias_error.html#cb132-6" tabindex="-1"></a>    <span class="st">&quot;pobrea_lp&quot;</span>,</span>
<span id="cb132-7"><a href="estimacion_municipios_carencias_error.html#cb132-7" tabindex="-1"></a>    <span class="st">&quot;pobrea_li&quot;</span>,</span>
<span id="cb132-8"><a href="estimacion_municipios_carencias_error.html#cb132-8" tabindex="-1"></a>    <span class="st">&quot;tol_ic_1&quot;</span>,</span>
<span id="cb132-9"><a href="estimacion_municipios_carencias_error.html#cb132-9" tabindex="-1"></a>    <span class="st">&quot;tol_ic_2&quot;</span>,</span>
<span id="cb132-10"><a href="estimacion_municipios_carencias_error.html#cb132-10" tabindex="-1"></a>    <span class="st">&quot;ic_segsoc&quot;</span>,</span>
<span id="cb132-11"><a href="estimacion_municipios_carencias_error.html#cb132-11" tabindex="-1"></a>    <span class="st">&quot;ic_ali_nc&quot;</span>,</span>
<span id="cb132-12"><a href="estimacion_municipios_carencias_error.html#cb132-12" tabindex="-1"></a>    N_pers_mpio,</span>
<span id="cb132-13"><a href="estimacion_municipios_carencias_error.html#cb132-13" tabindex="-1"></a>    <span class="fu">matches</span>(<span class="st">&quot;ee&quot;</span>)</span>
<span id="cb132-14"><a href="estimacion_municipios_carencias_error.html#cb132-14" tabindex="-1"></a>  )</span>
<span id="cb132-15"><a href="estimacion_municipios_carencias_error.html#cb132-15" tabindex="-1"></a></span>
<span id="cb132-16"><a href="estimacion_municipios_carencias_error.html#cb132-16" tabindex="-1"></a>temp <span class="sc">%&gt;%</span> <span class="fu">saveRDS</span>(<span class="st">&quot;../output/Entregas/2020/result_mpios_carencia.RDS&quot;</span>)</span>
<span id="cb132-17"><a href="estimacion_municipios_carencias_error.html#cb132-17" tabindex="-1"></a></span>
<span id="cb132-18"><a href="estimacion_municipios_carencias_error.html#cb132-18" tabindex="-1"></a>openxlsx<span class="sc">::</span><span class="fu">write.xlsx</span>(</span>
<span id="cb132-19"><a href="estimacion_municipios_carencias_error.html#cb132-19" tabindex="-1"></a>  temp,</span>
<span id="cb132-20"><a href="estimacion_municipios_carencias_error.html#cb132-20" tabindex="-1"></a>  <span class="fu">paste0</span>(</span>
<span id="cb132-21"><a href="estimacion_municipios_carencias_error.html#cb132-21" tabindex="-1"></a>    <span class="st">&quot;../output/Entregas/2020/estimacion_numicipal_carencia_&quot;</span>,</span>
<span id="cb132-22"><a href="estimacion_municipios_carencias_error.html#cb132-22" tabindex="-1"></a>    <span class="fu">Sys.Date</span>(),</span>
<span id="cb132-23"><a href="estimacion_municipios_carencias_error.html#cb132-23" tabindex="-1"></a>    <span class="st">&quot;.xlsx&quot;</span></span>
<span id="cb132-24"><a href="estimacion_municipios_carencias_error.html#cb132-24" tabindex="-1"></a>  )</span>
<span id="cb132-25"><a href="estimacion_municipios_carencias_error.html#cb132-25" tabindex="-1"></a>)</span>
<span id="cb132-26"><a href="estimacion_municipios_carencias_error.html#cb132-26" tabindex="-1"></a></span>
<span id="cb132-27"><a href="estimacion_municipios_carencias_error.html#cb132-27" tabindex="-1"></a>temp2 <span class="ot">&lt;-</span> temp <span class="sc">%&gt;%</span></span>
<span id="cb132-28"><a href="estimacion_municipios_carencias_error.html#cb132-28" tabindex="-1"></a>  <span class="fu">select</span>(ent, pobrea_lp<span class="sc">:</span>ic_ali_nc, N_pers_mpio) <span class="sc">%&gt;%</span></span>
<span id="cb132-29"><a href="estimacion_municipios_carencias_error.html#cb132-29" tabindex="-1"></a>  <span class="fu">group_by</span>(ent) <span class="sc">%&gt;%</span></span>
<span id="cb132-30"><a href="estimacion_municipios_carencias_error.html#cb132-30" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(</span>
<span id="cb132-31"><a href="estimacion_municipios_carencias_error.html#cb132-31" tabindex="-1"></a>    <span class="fu">c</span>(</span>
<span id="cb132-32"><a href="estimacion_municipios_carencias_error.html#cb132-32" tabindex="-1"></a>      <span class="st">&quot;pobrea_lp&quot;</span>,</span>
<span id="cb132-33"><a href="estimacion_municipios_carencias_error.html#cb132-33" tabindex="-1"></a>      <span class="st">&quot;pobrea_li&quot;</span>,</span>
<span id="cb132-34"><a href="estimacion_municipios_carencias_error.html#cb132-34" tabindex="-1"></a>      <span class="st">&quot;tol_ic_1&quot;</span>,</span>
<span id="cb132-35"><a href="estimacion_municipios_carencias_error.html#cb132-35" tabindex="-1"></a>      <span class="st">&quot;tol_ic_2&quot;</span>,</span>
<span id="cb132-36"><a href="estimacion_municipios_carencias_error.html#cb132-36" tabindex="-1"></a>      <span class="st">&quot;ic_segsoc&quot;</span>,</span>
<span id="cb132-37"><a href="estimacion_municipios_carencias_error.html#cb132-37" tabindex="-1"></a>      <span class="st">&quot;ic_ali_nc&quot;</span></span>
<span id="cb132-38"><a href="estimacion_municipios_carencias_error.html#cb132-38" tabindex="-1"></a>    ),</span>
<span id="cb132-39"><a href="estimacion_municipios_carencias_error.html#cb132-39" tabindex="-1"></a>    <span class="sc">~</span> <span class="fu">sum</span>(.x <span class="sc">*</span> N_pers_mpio) <span class="sc">/</span> <span class="fu">sum</span>(N_pers_mpio)</span>
<span id="cb132-40"><a href="estimacion_municipios_carencias_error.html#cb132-40" tabindex="-1"></a>  ))</span>
<span id="cb132-41"><a href="estimacion_municipios_carencias_error.html#cb132-41" tabindex="-1"></a></span>
<span id="cb132-42"><a href="estimacion_municipios_carencias_error.html#cb132-42" tabindex="-1"></a>openxlsx<span class="sc">::</span><span class="fu">write.xlsx</span>(</span>
<span id="cb132-43"><a href="estimacion_municipios_carencias_error.html#cb132-43" tabindex="-1"></a>  temp2,</span>
<span id="cb132-44"><a href="estimacion_municipios_carencias_error.html#cb132-44" tabindex="-1"></a>  <span class="fu">paste0</span>(</span>
<span id="cb132-45"><a href="estimacion_municipios_carencias_error.html#cb132-45" tabindex="-1"></a>    <span class="st">&quot;../output/Entregas/2020/estimacion_estado_carencia_&quot;</span>,</span>
<span id="cb132-46"><a href="estimacion_municipios_carencias_error.html#cb132-46" tabindex="-1"></a>    <span class="fu">Sys.Date</span>(),</span>
<span id="cb132-47"><a href="estimacion_municipios_carencias_error.html#cb132-47" tabindex="-1"></a>    <span class="st">&quot;.xlsx&quot;</span></span>
<span id="cb132-48"><a href="estimacion_municipios_carencias_error.html#cb132-48" tabindex="-1"></a>  )</span>
<span id="cb132-49"><a href="estimacion_municipios_carencias_error.html#cb132-49" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="visualización-de-resultados" class="section level4 unnumbered hasAnchor">
<h4>Visualización de Resultados<a href="estimacion_municipios_carencias_error.html#visualización-de-resultados" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Se generan y guardan gráficos que comparan los indicadores de pobreza entre diferentes fuentes de datos.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="estimacion_municipios_carencias_error.html#cb133-1" tabindex="-1"></a>diseno <span class="ot">&lt;-</span> encuesta_enigh <span class="sc">%&gt;%</span> <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span></span>
<span id="cb133-2"><a href="estimacion_municipios_carencias_error.html#cb133-2" tabindex="-1"></a>  <span class="fu">as_survey_design</span>(<span class="at">ids =</span> upm,</span>
<span id="cb133-3"><a href="estimacion_municipios_carencias_error.html#cb133-3" tabindex="-1"></a>                   <span class="at">weights =</span> fep,</span>
<span id="cb133-4"><a href="estimacion_municipios_carencias_error.html#cb133-4" tabindex="-1"></a>                   <span class="at">nest =</span> <span class="cn">TRUE</span>)</span>
<span id="cb133-5"><a href="estimacion_municipios_carencias_error.html#cb133-5" tabindex="-1"></a></span>
<span id="cb133-6"><a href="estimacion_municipios_carencias_error.html#cb133-6" tabindex="-1"></a>estimad_dir <span class="ot">&lt;-</span> diseno <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(ent) <span class="sc">%&gt;%</span></span>
<span id="cb133-7"><a href="estimacion_municipios_carencias_error.html#cb133-7" tabindex="-1"></a>  <span class="fu">summarise_at</span>(</span>
<span id="cb133-8"><a href="estimacion_municipios_carencias_error.html#cb133-8" tabindex="-1"></a>    <span class="at">.vars =</span> <span class="fu">c</span>(</span>
<span id="cb133-9"><a href="estimacion_municipios_carencias_error.html#cb133-9" tabindex="-1"></a>      <span class="st">&quot;pobrea_lp&quot;</span>,</span>
<span id="cb133-10"><a href="estimacion_municipios_carencias_error.html#cb133-10" tabindex="-1"></a>      <span class="st">&quot;pobrea_li&quot;</span>,</span>
<span id="cb133-11"><a href="estimacion_municipios_carencias_error.html#cb133-11" tabindex="-1"></a>      <span class="st">&quot;tol_ic_1&quot;</span>,</span>
<span id="cb133-12"><a href="estimacion_municipios_carencias_error.html#cb133-12" tabindex="-1"></a>      <span class="st">&quot;tol_ic_2&quot;</span>,</span>
<span id="cb133-13"><a href="estimacion_municipios_carencias_error.html#cb133-13" tabindex="-1"></a>      <span class="st">&quot;ic_segsoc&quot;</span>,</span>
<span id="cb133-14"><a href="estimacion_municipios_carencias_error.html#cb133-14" tabindex="-1"></a>      <span class="st">&quot;ic_ali_nc&quot;</span></span>
<span id="cb133-15"><a href="estimacion_municipios_carencias_error.html#cb133-15" tabindex="-1"></a>    ),</span>
<span id="cb133-16"><a href="estimacion_municipios_carencias_error.html#cb133-16" tabindex="-1"></a>    <span class="at">.funs =</span> <span class="fu">list</span>(<span class="at">dir =</span> <span class="sc">~</span> <span class="fu">survey_mean</span>(., <span class="at">vartype =</span> <span class="st">&quot;ci&quot;</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb133-17"><a href="estimacion_municipios_carencias_error.html#cb133-17" tabindex="-1"></a>  )</span>
<span id="cb133-18"><a href="estimacion_municipios_carencias_error.html#cb133-18" tabindex="-1"></a></span>
<span id="cb133-19"><a href="estimacion_municipios_carencias_error.html#cb133-19" tabindex="-1"></a>ind <span class="ot">&lt;-</span></span>
<span id="cb133-20"><a href="estimacion_municipios_carencias_error.html#cb133-20" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">&quot;pobrea_lp&quot;</span>,</span>
<span id="cb133-21"><a href="estimacion_municipios_carencias_error.html#cb133-21" tabindex="-1"></a>    <span class="st">&quot;pobrea_li&quot;</span>,</span>
<span id="cb133-22"><a href="estimacion_municipios_carencias_error.html#cb133-22" tabindex="-1"></a>    <span class="st">&quot;tol_ic_1&quot;</span>,</span>
<span id="cb133-23"><a href="estimacion_municipios_carencias_error.html#cb133-23" tabindex="-1"></a>    <span class="st">&quot;tol_ic_2&quot;</span>,</span>
<span id="cb133-24"><a href="estimacion_municipios_carencias_error.html#cb133-24" tabindex="-1"></a>    <span class="st">&quot;ic_segsoc&quot;</span>,</span>
<span id="cb133-25"><a href="estimacion_municipios_carencias_error.html#cb133-25" tabindex="-1"></a>    <span class="st">&quot;ic_ali_nc&quot;</span>)</span>
<span id="cb133-26"><a href="estimacion_municipios_carencias_error.html#cb133-26" tabindex="-1"></a></span>
<span id="cb133-27"><a href="estimacion_municipios_carencias_error.html#cb133-27" tabindex="-1"></a><span class="cf">for</span> (ii_ipm <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>) {</span>
<span id="cb133-28"><a href="estimacion_municipios_carencias_error.html#cb133-28" tabindex="-1"></a>  ii_ipm <span class="ot">&lt;-</span> ind[ii_ipm]</span>
<span id="cb133-29"><a href="estimacion_municipios_carencias_error.html#cb133-29" tabindex="-1"></a>  paso <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;(_|</span><span class="sc">\\</span><span class="st">b)&quot;</span>, ii_ipm, <span class="st">&quot;(_|</span><span class="sc">\\</span><span class="st">b)&quot;</span>)</span>
<span id="cb133-30"><a href="estimacion_municipios_carencias_error.html#cb133-30" tabindex="-1"></a>  dat_plot <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(estimad_dir, temp2) <span class="sc">%&gt;%</span></span>
<span id="cb133-31"><a href="estimacion_municipios_carencias_error.html#cb133-31" tabindex="-1"></a>    <span class="fu">select</span>(ent, <span class="fu">matches</span>(paso))</span>
<span id="cb133-32"><a href="estimacion_municipios_carencias_error.html#cb133-32" tabindex="-1"></a>  </span>
<span id="cb133-33"><a href="estimacion_municipios_carencias_error.html#cb133-33" tabindex="-1"></a>  dat_lim <span class="ot">&lt;-</span> dat_plot <span class="sc">%&gt;%</span> <span class="fu">select</span>(ent, <span class="fu">matches</span>(<span class="st">&quot;upp|low&quot;</span>))</span>
<span id="cb133-34"><a href="estimacion_municipios_carencias_error.html#cb133-34" tabindex="-1"></a>  <span class="fu">names</span>(dat_lim) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;ent&quot;</span>, <span class="st">&quot;Lim_Inf&quot;</span>, <span class="st">&quot;Lim_Sup&quot;</span>)</span>
<span id="cb133-35"><a href="estimacion_municipios_carencias_error.html#cb133-35" tabindex="-1"></a>  </span>
<span id="cb133-36"><a href="estimacion_municipios_carencias_error.html#cb133-36" tabindex="-1"></a>  dat_plot <span class="sc">%&lt;&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">matches</span>(<span class="st">&quot;upp|low&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb133-37"><a href="estimacion_municipios_carencias_error.html#cb133-37" tabindex="-1"></a>    <span class="fu">gather</span>(<span class="at">key =</span> <span class="st">&quot;Origen&quot;</span>, <span class="at">value =</span> <span class="st">&quot;Prop&quot;</span>, <span class="sc">-</span>ent) <span class="sc">%&gt;%</span></span>
<span id="cb133-38"><a href="estimacion_municipios_carencias_error.html#cb133-38" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Origen =</span> <span class="fu">ifelse</span>(<span class="fu">grepl</span>(<span class="at">pattern =</span> <span class="st">&quot;dir&quot;</span>, <span class="at">x =</span> Origen), <span class="st">&quot;ENIGH&quot;</span>, <span class="st">&quot;Estimación CEPAL&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb133-39"><a href="estimacion_municipios_carencias_error.html#cb133-39" tabindex="-1"></a>    <span class="fu">inner_join</span>(dat_lim)</span>
<span id="cb133-40"><a href="estimacion_municipios_carencias_error.html#cb133-40" tabindex="-1"></a>  </span>
<span id="cb133-41"><a href="estimacion_municipios_carencias_error.html#cb133-41" tabindex="-1"></a>  gg_plot <span class="ot">&lt;-</span></span>
<span id="cb133-42"><a href="estimacion_municipios_carencias_error.html#cb133-42" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="at">data =</span> dat_plot, <span class="fu">aes</span>(<span class="at">x =</span> ent, <span class="at">y =</span> Prop, <span class="at">color =</span> Origen)) <span class="sc">+</span></span>
<span id="cb133-43"><a href="estimacion_municipios_carencias_error.html#cb133-43" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb133-44"><a href="estimacion_municipios_carencias_error.html#cb133-44" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb133-45"><a href="estimacion_municipios_carencias_error.html#cb133-45" tabindex="-1"></a>      <span class="at">y =</span> <span class="st">&quot;Estimación&quot;</span>,</span>
<span id="cb133-46"><a href="estimacion_municipios_carencias_error.html#cb133-46" tabindex="-1"></a>      <span class="at">color =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb133-47"><a href="estimacion_municipios_carencias_error.html#cb133-47" tabindex="-1"></a>      <span class="at">title =</span> <span class="fu">paste0</span>(<span class="st">&quot;Estimación de la carencia 2020 -&quot;</span>, ii_ipm)</span>
<span id="cb133-48"><a href="estimacion_municipios_carencias_error.html#cb133-48" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb133-49"><a href="estimacion_municipios_carencias_error.html#cb133-49" tabindex="-1"></a>    <span class="fu">theme_bw</span>(<span class="dv">20</span>) <span class="sc">+</span></span>
<span id="cb133-50"><a href="estimacion_municipios_carencias_error.html#cb133-50" tabindex="-1"></a>    <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb133-51"><a href="estimacion_municipios_carencias_error.html#cb133-51" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb133-52"><a href="estimacion_municipios_carencias_error.html#cb133-52" tabindex="-1"></a>          <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb133-53"><a href="estimacion_municipios_carencias_error.html#cb133-53" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">scale =</span> <span class="dv">100</span>))</span>
<span id="cb133-54"><a href="estimacion_municipios_carencias_error.html#cb133-54" tabindex="-1"></a>  </span>
<span id="cb133-55"><a href="estimacion_municipios_carencias_error.html#cb133-55" tabindex="-1"></a>  gg_plot <span class="ot">&lt;-</span> gg_plot <span class="sc">+</span></span>
<span id="cb133-56"><a href="estimacion_municipios_carencias_error.html#cb133-56" tabindex="-1"></a>    <span class="fu">geom_errorbar</span>(</span>
<span id="cb133-57"><a href="estimacion_municipios_carencias_error.html#cb133-57" tabindex="-1"></a>      <span class="at">data =</span> dat_plot <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Origen <span class="sc">==</span> <span class="st">&quot;ENIGH&quot;</span>),</span>
<span id="cb133-58"><a href="estimacion_municipios_carencias_error.html#cb133-58" tabindex="-1"></a>      <span class="fu">aes</span>(<span class="at">ymin =</span> Lim_Inf, <span class="at">ymax =</span> Lim_Sup, <span class="at">x =</span> ent),</span>
<span id="cb133-59"><a href="estimacion_municipios_carencias_error.html#cb133-59" tabindex="-1"></a>      <span class="at">width =</span> <span class="fl">0.2</span>,</span>
<span id="cb133-60"><a href="estimacion_municipios_carencias_error.html#cb133-60" tabindex="-1"></a>      <span class="at">linewidth =</span> <span class="dv">1</span></span>
<span id="cb133-61"><a href="estimacion_municipios_carencias_error.html#cb133-61" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb133-62"><a href="estimacion_municipios_carencias_error.html#cb133-62" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(</span>
<span id="cb133-63"><a href="estimacion_municipios_carencias_error.html#cb133-63" tabindex="-1"></a>      <span class="at">breaks =</span> <span class="fu">c</span>(<span class="st">&quot;ENIGH&quot;</span>, <span class="st">&quot;Estimación CEPAL&quot;</span>),</span>
<span id="cb133-64"><a href="estimacion_municipios_carencias_error.html#cb133-64" tabindex="-1"></a>      <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;blue3&quot;</span>)</span>
<span id="cb133-65"><a href="estimacion_municipios_carencias_error.html#cb133-65" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb133-66"><a href="estimacion_municipios_carencias_error.html#cb133-66" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb133-67"><a href="estimacion_municipios_carencias_error.html#cb133-67" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb133-68"><a href="estimacion_municipios_carencias_error.html#cb133-68" tabindex="-1"></a>      <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb133-69"><a href="estimacion_municipios_carencias_error.html#cb133-69" tabindex="-1"></a>      <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb133-70"><a href="estimacion_municipios_carencias_error.html#cb133-70" tabindex="-1"></a>      <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(</span>
<span id="cb133-71"><a href="estimacion_municipios_carencias_error.html#cb133-71" tabindex="-1"></a>        <span class="at">angle =</span> <span class="dv">90</span>,</span>
<span id="cb133-72"><a href="estimacion_municipios_carencias_error.html#cb133-72" tabindex="-1"></a>        <span class="at">size =</span> <span class="dv">8</span>,</span>
<span id="cb133-73"><a href="estimacion_municipios_carencias_error.html#cb133-73" tabindex="-1"></a>        <span class="at">vjust =</span> <span class="fl">0.3</span></span>
<span id="cb133-74"><a href="estimacion_municipios_carencias_error.html#cb133-74" tabindex="-1"></a>      ),</span>
<span id="cb133-75"><a href="estimacion_municipios_carencias_error.html#cb133-75" tabindex="-1"></a>      <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">15</span>),</span>
<span id="cb133-76"><a href="estimacion_municipios_carencias_error.html#cb133-76" tabindex="-1"></a>      <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">15</span>)</span>
<span id="cb133-77"><a href="estimacion_municipios_carencias_error.html#cb133-77" tabindex="-1"></a>    )</span>
<span id="cb133-78"><a href="estimacion_municipios_carencias_error.html#cb133-78" tabindex="-1"></a>  </span>
<span id="cb133-79"><a href="estimacion_municipios_carencias_error.html#cb133-79" tabindex="-1"></a>  <span class="fu">print</span>(gg_plot)</span>
<span id="cb133-80"><a href="estimacion_municipios_carencias_error.html#cb133-80" tabindex="-1"></a>  <span class="fu">ggsave</span>(</span>
<span id="cb133-81"><a href="estimacion_municipios_carencias_error.html#cb133-81" tabindex="-1"></a>    <span class="at">plot =</span> gg_plot,</span>
<span id="cb133-82"><a href="estimacion_municipios_carencias_error.html#cb133-82" tabindex="-1"></a>    <span class="at">width =</span> <span class="dv">16</span>,</span>
<span id="cb133-83"><a href="estimacion_municipios_carencias_error.html#cb133-83" tabindex="-1"></a>    <span class="at">height =</span> <span class="dv">9</span>,</span>
<span id="cb133-84"><a href="estimacion_municipios_carencias_error.html#cb133-84" tabindex="-1"></a>    <span class="at">filename =</span> <span class="fu">paste0</span>(<span class="st">&quot;../output/Entregas/2020/plot_uni/ipm_&quot;</span>, ii_ipm, <span class="st">&quot;.png&quot;</span>)</span>
<span id="cb133-85"><a href="estimacion_municipios_carencias_error.html#cb133-85" tabindex="-1"></a>  )</span>
<span id="cb133-86"><a href="estimacion_municipios_carencias_error.html#cb133-86" tabindex="-1"></a>}</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="estimacion_municipios_carencias.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="mapas_carencias.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/psirusteam/2023MEXsae/18_estimacion_municipios_carencias_error.qmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Manual de procesamiento del indicador de pobreza multidimensional mediante el uso de estimación de áreas pequeñas para México 2020.pdf", "Manual de procesamiento del indicador de pobreza multidimensional mediante el uso de estimación de áreas pequeñas para México 2020.epub", "Manual de procesamiento del indicador de pobreza multidimensional mediante el uso de estimación de áreas pequeñas para México 2020.mobi"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
},
"tconfig": null
});
});
</script>

</body>

</html>
