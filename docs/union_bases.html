<!DOCTYPE html>
<html lang="es" xml:lang="es">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>00_union_bases.R | Manual de procesamiento del indicador de pobreza multidimensional mediante el uso de estimación de áreas pequeñas para México 2020</title>
  <meta name="description" content="Manual de procesamiento." />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="00_union_bases.R | Manual de procesamiento del indicador de pobreza multidimensional mediante el uso de estimación de áreas pequeñas para México 2020" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Manual de procesamiento." />
  <meta name="github-repo" content="psirusteam/coneval" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="00_union_bases.R | Manual de procesamiento del indicador de pobreza multidimensional mediante el uso de estimación de áreas pequeñas para México 2020" />
  
  <meta name="twitter:description" content="Manual de procesamiento." />
  

<meta name="author" content="Andrés Gutiérrez, Stalyn Guerrero" />


<meta name="date" content="2024-07-30" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="indicadores-estimados.html"/>
<link rel="next" href="descarga_satelitales.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Manual de procesamiento.</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introducción</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#respositodio-de-códigos"><i class="fa fa-check"></i>Respositodio de códigos</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#estructura-del-proyecto"><i class="fa fa-check"></i>Estructura del Proyecto</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#librerias-de-r-y-otros-insumos"><i class="fa fa-check"></i>Librerias de <em>R</em> y otros insumos</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#bases-de-datos-utilizadas"><i class="fa fa-check"></i>Bases de Datos Utilizadas</a></li>
<li class="chapter" data-level="" data-path="indicadores-estimados.html"><a href="indicadores-estimados.html"><i class="fa fa-check"></i>Indicadores estimados</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="union_bases.html"><a href="union_bases.html"><i class="fa fa-check"></i>00_union_bases.R</a></li>
<li class="chapter" data-level="" data-path="descarga_satelitales.html"><a href="descarga_satelitales.html"><i class="fa fa-check"></i>01_Descarga_satelitales.R</a></li>
<li class="chapter" data-level="" data-path="union_predictores.html"><a href="union_predictores.html"><i class="fa fa-check"></i>02_Union_predictores.R</a>
<ul>
<li class="chapter" data-level="0.0.1" data-path="union_predictores.html"><a href="union_predictores.html#configuración-inicial-y-carga-de-librerías"><i class="fa fa-check"></i><b>0.0.1</b> Configuración Inicial y Carga de Librerías</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="estandarizar_muestra_cuestionario_ampliado.html"><a href="estandarizar_muestra_cuestionario_ampliado.html"><i class="fa fa-check"></i>03_Estandarizar_muestra_cuestionario_ampliado.R</a>
<ul>
<li class="chapter" data-level="" data-path="estandarizar_muestra_cuestionario_ampliado.html"><a href="estandarizar_muestra_cuestionario_ampliado.html#resumen-y-guardado-de-datos-agrupados"><i class="fa fa-check"></i>Resumen y Guardado de Datos Agrupados</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="armonizar_encuesta.html"><a href="armonizar_encuesta.html"><i class="fa fa-check"></i>04_Armonizar_encuesta.R</a></li>
<li class="chapter" data-level="" data-path="validacion_encuestas.html"><a href="validacion_encuestas.html"><i class="fa fa-check"></i>05_Validacion_encuestas.R</a></li>
<li class="chapter" data-level="" data-path="modelo_unidad_ictpc.html"><a href="modelo_unidad_ictpc.html"><i class="fa fa-check"></i>06_Modelo_unidad_ictpc.R</a></li>
<li class="chapter" data-level="" data-path="modelo_unidad_py_ic_ali_nc.html"><a href="modelo_unidad_py_ic_ali_nc.html"><i class="fa fa-check"></i>07_Modelo_unidad_py_ic_ali_nc.R</a></li>
<li class="chapter" data-level="" data-path="modelo_unidad_py_ic_segsoc.html"><a href="modelo_unidad_py_ic_segsoc.html"><i class="fa fa-check"></i>08_Modelo_unidad_py_ic_segsoc</a></li>
<li class="chapter" data-level="" data-path="postbenchmarking_ictpc.html"><a href="postbenchmarking_ictpc.html"><i class="fa fa-check"></i>09_PostBenchmarking_ictpc.R</a></li>
<li class="chapter" data-level="" data-path="postbenchmarking_ic_ali_nc.html"><a href="postbenchmarking_ic_ali_nc.html"><i class="fa fa-check"></i>10_PostBenchmarking_ic_ali_nc.R</a></li>
<li class="chapter" data-level="" data-path="postbenchmarking_ic_segsoc.html"><a href="postbenchmarking_ic_segsoc.html"><i class="fa fa-check"></i>11_PostBenchmarking_ic_segsoc.r</a></li>
<li class="chapter" data-level="" data-path="imputacion_censal.html"><a href="imputacion_censal.html"><i class="fa fa-check"></i>12_Imputacion_censal.R</a></li>
<li class="chapter" data-level="" data-path="estimacion_ent_02.html"><a href="estimacion_ent_02.html"><i class="fa fa-check"></i>13_Estimacion_ent_02.R</a></li>
<li class="chapter" data-level="" data-path="estimacion_municipios_ipm_pobreza.html"><a href="estimacion_municipios_ipm_pobreza.html"><i class="fa fa-check"></i>14_estimacion_municipios_ipm_pobreza.R</a></li>
<li class="chapter" data-level="" data-path="estimacion_municipios_ipm_pobreza_error.html"><a href="estimacion_municipios_ipm_pobreza_error.html"><i class="fa fa-check"></i>15_estimacion_municipios_ipm_pobreza_error.R</a></li>
<li class="chapter" data-level="" data-path="mapas.html"><a href="mapas.html"><i class="fa fa-check"></i>16_Mapas.R</a></li>
<li class="chapter" data-level="" data-path="estimacion_municipios_carencias.html"><a href="estimacion_municipios_carencias.html"><i class="fa fa-check"></i>17_estimacion_municipios_carencias.R</a></li>
<li class="chapter" data-level="" data-path="estimacion_municipios_carencias_error.html"><a href="estimacion_municipios_carencias_error.html"><i class="fa fa-check"></i>18_estimacion_municipios_carencias_error.R</a></li>
<li class="chapter" data-level="" data-path="mapas_carencias.html"><a href="mapas_carencias.html"><i class="fa fa-check"></i>19_Mapas_carencias.R</a></li>
<li class="chapter" data-level="" data-path="estimacion_directa_carencias.html"><a href="estimacion_directa_carencias.html"><i class="fa fa-check"></i>20_estimacion_directa_carencias.R</a></li>
<li class="divider"></li>
<li><a Manual de procesamiento. </a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Manual de procesamiento del indicador de pobreza multidimensional mediante el uso de estimación de áreas pequeñas para México 2020</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="union_bases.r" class="section level1 unnumbered hasAnchor">
<h1>00_union_bases.R<a href="union_bases.html#union_bases.r" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Para la ejecución del presente archivo, debe abrir el archivo <strong>00_union_bases.R</strong> disponible en la ruta <em>Rcodes/2020/00_union_bases.R</em>.</p>
<p>El código comienza limpiando el entorno de R y cargando varias bibliotecas esenciales para la manipulación y análisis de datos. Posteriormente, define un conjunto de variables a validar y obtiene listas de archivos de datos en formato <code>.dta</code> correspondientes a diferentes conjuntos de datos del censo 2020. A continuación, el código itera sobre estos archivos para leer, combinar y almacenar los datos de cada estado en archivos <code>.rds</code> individuales. Estos datos se combinan en un único dataframe que se guarda para su uso posterior.</p>
<p>En la sección final, el código se centra en los datos de la ENIGH 2020. Lee los archivos de hogares y pobreza, y los combina utilizando un <code>inner_join</code>. Se seleccionan y renombran variables clave para asegurar la consistencia en el análisis. Finalmente, el dataframe combinado se guarda en un archivo <code>.rds</code> para facilitar el acceso y análisis futuros.</p>
<div id="limpieza-del-entorno-y-carga-de-bibliotecas" class="section level4 unnumbered hasAnchor">
<h4>Limpieza del Entorno y Carga de Bibliotecas<a href="union_bases.html#limpieza-del-entorno-y-carga-de-bibliotecas" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Se limpia el entorno de R eliminando todos los objetos y se ejecuta el recolector de basura para liberar memoria.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="union_bases.html#cb1-1" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb1-2"><a href="union_bases.html#cb1-2" tabindex="-1"></a><span class="fu">gc</span>()</span></code></pre></div>
<p>Se cargan varias bibliotecas esenciales para la manipulación y análisis de datos, incluyendo <code>tidyverse</code>, <code>data.table</code>, <code>haven</code> y otras.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="union_bases.html#cb2-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-2"><a href="union_bases.html#cb2-2" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb2-3"><a href="union_bases.html#cb2-3" tabindex="-1"></a><span class="fu">library</span>(openxlsx)</span>
<span id="cb2-4"><a href="union_bases.html#cb2-4" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb2-5"><a href="union_bases.html#cb2-5" tabindex="-1"></a><span class="fu">library</span>(DataExplorer)</span>
<span id="cb2-6"><a href="union_bases.html#cb2-6" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb2-7"><a href="union_bases.html#cb2-7" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb2-8"><a href="union_bases.html#cb2-8" tabindex="-1"></a><span class="fu">library</span>(furrr)</span>
<span id="cb2-9"><a href="union_bases.html#cb2-9" tabindex="-1"></a><span class="fu">library</span>(labelled)</span>
<span id="cb2-10"><a href="union_bases.html#cb2-10" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;</span><span class="sc">\f</span><span class="st">&quot;</span>)</span></code></pre></div>
</div>
<div id="configuración-de-la-memoria" class="section level4 unnumbered hasAnchor">
<h4>Configuración de la Memoria<a href="union_bases.html#configuración-de-la-memoria" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Se define un límite para la memoria RAM a utilizar, en este caso 250 GB.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="union_bases.html#cb3-1" tabindex="-1"></a><span class="fu">memory.limit</span>(<span class="dv">250000000</span>)</span></code></pre></div>
</div>
<div id="definición-de-variables-y-obtención-de-archivos" class="section level4 unnumbered hasAnchor">
<h4>Definición de Variables y Obtención de Archivos<a href="union_bases.html#definición-de-variables-y-obtención-de-archivos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Para llevar a cabo la validación y procesamiento de datos del censo 2020, se define un conjunto de variables que serán validadas. Estas variables incluyen indicadores clave como rezago educativo (<code>ic_rezedu</code>), acceso a servicios de salud (<code>ic_asalud</code>), seguridad social (<code>ic_segsoc</code>), calidad de la vivienda (<code>ic_cv</code>), servicios básicos en la vivienda (<code>ic_sbv</code>), acceso a alimentación nutritiva y de calidad (<code>ic_ali_nc</code>), y el índice de pobreza multidimensional (<code>ictpc</code>).</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="union_bases.html#cb4-1" tabindex="-1"></a>validar_var <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb4-2"><a href="union_bases.html#cb4-2" tabindex="-1"></a>  <span class="st">&quot;ic_rezedu&quot;</span>,</span>
<span id="cb4-3"><a href="union_bases.html#cb4-3" tabindex="-1"></a>  <span class="st">&quot;ic_asalud&quot;</span>,</span>
<span id="cb4-4"><a href="union_bases.html#cb4-4" tabindex="-1"></a>  <span class="st">&quot;ic_segsoc&quot;</span>,</span>
<span id="cb4-5"><a href="union_bases.html#cb4-5" tabindex="-1"></a>  <span class="st">&quot;ic_cv&quot;</span>,</span>
<span id="cb4-6"><a href="union_bases.html#cb4-6" tabindex="-1"></a>  <span class="st">&quot;ic_sbv&quot;</span>,</span>
<span id="cb4-7"><a href="union_bases.html#cb4-7" tabindex="-1"></a>  <span class="st">&quot;ic_ali_nc&quot;</span>,</span>
<span id="cb4-8"><a href="union_bases.html#cb4-8" tabindex="-1"></a>  <span class="st">&quot;ictpc&quot;</span></span>
<span id="cb4-9"><a href="union_bases.html#cb4-9" tabindex="-1"></a>)</span></code></pre></div>
<p>Posteriormente, se obtienen listas de archivos con extensión <code>.dta</code>, que corresponden a diferentes conjuntos de datos del censo 2020. Estos archivos se organizan en tres categorías principales:</p>
<ol style="list-style-type: decimal">
<li><strong>Archivos de muestra del censo 2020 por estado</strong>: Se buscan archivos en la ruta <code>../input/2020/muestra_ampliada/SegSocial/SegSoc/</code> que contengan información de seguridad social.</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="union_bases.html#cb5-1" tabindex="-1"></a>file_muestra_censo_2020_estado <span class="ot">&lt;-</span> <span class="fu">list.files</span>(</span>
<span id="cb5-2"><a href="union_bases.html#cb5-2" tabindex="-1"></a>  <span class="st">&quot;../input/2020/muestra_ampliada/SegSocial/SegSoc/&quot;</span>,</span>
<span id="cb5-3"><a href="union_bases.html#cb5-3" tabindex="-1"></a>  <span class="at">full.names =</span> <span class="cn">TRUE</span>,</span>
<span id="cb5-4"><a href="union_bases.html#cb5-4" tabindex="-1"></a>  <span class="at">pattern =</span> <span class="st">&quot;dta$&quot;</span></span>
<span id="cb5-5"><a href="union_bases.html#cb5-5" tabindex="-1"></a>)</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li><strong>Archivos complementarios de muestra del censo 2020 por estado</strong>: Se buscan archivos adicionales en la ruta <code>../input/2020/muestra_ampliada/SegSocial/Complemento_SegSoc/</code> que contienen datos complementarios de seguridad social.</li>
</ol>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="union_bases.html#cb6-1" tabindex="-1"></a>file_muestra_censo_2020_estado_complemento <span class="ot">&lt;-</span> <span class="fu">list.files</span>(</span>
<span id="cb6-2"><a href="union_bases.html#cb6-2" tabindex="-1"></a>  <span class="st">&quot;../input/2020/muestra_ampliada/SegSocial/Complemento_SegSoc/&quot;</span>,</span>
<span id="cb6-3"><a href="union_bases.html#cb6-3" tabindex="-1"></a>  <span class="at">full.names =</span> <span class="cn">TRUE</span>,</span>
<span id="cb6-4"><a href="union_bases.html#cb6-4" tabindex="-1"></a>  <span class="at">pattern =</span> <span class="st">&quot;dta$&quot;</span></span>
<span id="cb6-5"><a href="union_bases.html#cb6-5" tabindex="-1"></a>)</span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li><strong>Archivos de cuestionario ampliado del censo 2020 por estado</strong>: Se buscan archivos en la ruta <code>../input/2020/muestra_ampliada/IndicadoresCenso/</code> que incluyen indicadores generales del censo.</li>
</ol>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="union_bases.html#cb7-1" tabindex="-1"></a>muestra_cuestionario_ampliado_censo_2020_estado <span class="ot">&lt;-</span> <span class="fu">list.files</span>(</span>
<span id="cb7-2"><a href="union_bases.html#cb7-2" tabindex="-1"></a>  <span class="st">&quot;../input/2020/muestra_ampliada/IndicadoresCenso/&quot;</span>,</span>
<span id="cb7-3"><a href="union_bases.html#cb7-3" tabindex="-1"></a>  <span class="at">full.names =</span> <span class="cn">TRUE</span>,</span>
<span id="cb7-4"><a href="union_bases.html#cb7-4" tabindex="-1"></a>  <span class="at">pattern =</span> <span class="st">&quot;dta$&quot;</span></span>
<span id="cb7-5"><a href="union_bases.html#cb7-5" tabindex="-1"></a>)</span></code></pre></div>
<p>Estas listas de archivos permiten acceder y gestionar de manera eficiente los datos necesarios para el análisis y validación de los indicadores de pobreza y carencias sociales del censo 2020.</p>
</div>
<div id="lectura-y-combinación-de-datos-del-censo" class="section level4 unnumbered hasAnchor">
<h4>Lectura y Combinación de Datos del Censo<a href="union_bases.html#lectura-y-combinación-de-datos-del-censo" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Este bloque de código está diseñado para leer, combinar y guardar datos provenientes de múltiples archivos del censo. El objetivo es consolidar la información de diferentes fuentes en un único dataframe y almacenar los resultados intermedios y finales en archivos <code>.rds</code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="union_bases.html#cb8-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb8-2"><a href="union_bases.html#cb8-2" tabindex="-1"></a></span>
<span id="cb8-3"><a href="union_bases.html#cb8-3" tabindex="-1"></a><span class="cf">for</span> (ii <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">32</span>) {</span>
<span id="cb8-4"><a href="union_bases.html#cb8-4" tabindex="-1"></a>  muestra_censo_2020_estado_ii <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(file_muestra_censo_2020_estado[ii])</span>
<span id="cb8-5"><a href="union_bases.html#cb8-5" tabindex="-1"></a>  muestra_censo_2020_estado_complemento_ii <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(file_muestra_censo_2020_estado_complemento[ii]) <span class="sc">%&gt;%</span></span>
<span id="cb8-6"><a href="union_bases.html#cb8-6" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">id_per =</span> id_persona)</span>
<span id="cb8-7"><a href="union_bases.html#cb8-7" tabindex="-1"></a>  muestra_cuestionario_ampliado_censo_2020_estado_ii <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(muestra_cuestionario_ampliado_censo_2020_estado[ii])</span>
<span id="cb8-8"><a href="union_bases.html#cb8-8" tabindex="-1"></a>  </span>
<span id="cb8-9"><a href="union_bases.html#cb8-9" tabindex="-1"></a>  muestra_censo <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(muestra_censo_2020_estado_ii, muestra_censo_2020_estado_complemento_ii) <span class="sc">%&gt;%</span></span>
<span id="cb8-10"><a href="union_bases.html#cb8-10" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>tamloc) <span class="sc">%&gt;%</span></span>
<span id="cb8-11"><a href="union_bases.html#cb8-11" tabindex="-1"></a>    <span class="fu">inner_join</span>(muestra_cuestionario_ampliado_censo_2020_estado_ii)</span>
<span id="cb8-12"><a href="union_bases.html#cb8-12" tabindex="-1"></a>  </span>
<span id="cb8-13"><a href="union_bases.html#cb8-13" tabindex="-1"></a>  <span class="fu">saveRDS</span>(muestra_censo, <span class="fu">paste0</span>(<span class="st">&quot;../output/2020/muestra_censo/depto_&quot;</span>, ii, <span class="st">&quot;.rds&quot;</span>))</span>
<span id="cb8-14"><a href="union_bases.html#cb8-14" tabindex="-1"></a>  </span>
<span id="cb8-15"><a href="union_bases.html#cb8-15" tabindex="-1"></a>  df <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(df, muestra_censo)</span>
<span id="cb8-16"><a href="union_bases.html#cb8-16" tabindex="-1"></a>  <span class="fu">cat</span>(file_muestra_censo_2020_estado[ii], <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb8-17"><a href="union_bases.html#cb8-17" tabindex="-1"></a>}</span></code></pre></div>
<p>Se guarda el dataframe combinado en un archivo <code>.rds</code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="union_bases.html#cb9-1" tabindex="-1"></a><span class="fu">saveRDS</span>(df, <span class="at">file =</span> <span class="st">&quot;../output/2020/muestra_cuestionario_ampliado.rds&quot;</span>)</span></code></pre></div>
</div>
<div id="lectura-y-combinación-de-datos-de-la-enigh" class="section level4 unnumbered hasAnchor">
<h4>Lectura y Combinación de Datos de la ENIGH<a href="union_bases.html#lectura-y-combinación-de-datos-de-la-enigh" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Este bloque de código está diseñado para leer, verificar y combinar datos de la Encuesta Nacional de Ingresos y Gastos de los Hogares (ENIGH) 2020. La finalidad es consolidar la información de diferentes archivos de datos en un único dataframe para su posterior análisis.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="union_bases.html#cb10-1" tabindex="-1"></a>enigh_hogares <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="st">&quot;../input/2020/enigh/base_hogares20.dta&quot;</span>)</span>
<span id="cb10-2"><a href="union_bases.html#cb10-2" tabindex="-1"></a>enigh_pobreza <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="st">&quot;../input/2020/enigh/pobreza_20.dta&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb10-3"><a href="union_bases.html#cb10-3" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>ent)</span></code></pre></div>
<p>Se leen los datos de hogares y pobreza de la ENIGH 2020.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="union_bases.html#cb11-1" tabindex="-1"></a><span class="fu">n_distinct</span>(enigh_pobreza<span class="sc">$</span>folioviv)</span>
<span id="cb11-2"><a href="union_bases.html#cb11-2" tabindex="-1"></a><span class="fu">n_distinct</span>(enigh_hogares<span class="sc">$</span>folioviv)</span></code></pre></div>
<p>Se verifica la unicidad de los identificadores de viviendas.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="union_bases.html#cb12-1" tabindex="-1"></a>enigh <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(</span>
<span id="cb12-2"><a href="union_bases.html#cb12-2" tabindex="-1"></a>  enigh_pobreza,</span>
<span id="cb12-3"><a href="union_bases.html#cb12-3" tabindex="-1"></a>  enigh_hogares,</span>
<span id="cb12-4"><a href="union_bases.html#cb12-4" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">join_by</span>(</span>
<span id="cb12-5"><a href="union_bases.html#cb12-5" tabindex="-1"></a>    folioviv, foliohog, est_dis, upm,</span>
<span id="cb12-6"><a href="union_bases.html#cb12-6" tabindex="-1"></a>    factor, rururb, ubica_geo</span>
<span id="cb12-7"><a href="union_bases.html#cb12-7" tabindex="-1"></a>  ), </span>
<span id="cb12-8"><a href="union_bases.html#cb12-8" tabindex="-1"></a>  <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">&quot;_pers&quot;</span>, <span class="st">&quot;_hog&quot;</span>)</span>
<span id="cb12-9"><a href="union_bases.html#cb12-9" tabindex="-1"></a>)</span></code></pre></div>
<p>Se combinan los datos de pobreza y hogares utilizando un <code>inner_join</code>.</p>
</div>
<div id="selección-y-renombramiento-de-variables" class="section level4 unnumbered hasAnchor">
<h4>Selección y Renombramiento de Variables<a href="union_bases.html#selección-y-renombramiento-de-variables" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>En esta sección, se seleccionan y renombran algunas variables clave del dataframe combinado para asegurar la consistencia en el análisis y facilitar su manipulación posterior.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="union_bases.html#cb13-1" tabindex="-1"></a>   enigh<span class="sc">$</span>ic_ali_nc</span>
<span id="cb13-2"><a href="union_bases.html#cb13-2" tabindex="-1"></a>   enigh<span class="sc">$</span>ictpc_pers</span>
<span id="cb13-3"><a href="union_bases.html#cb13-3" tabindex="-1"></a>   enigh<span class="sc">$</span>ictpc <span class="ot">&lt;-</span> enigh<span class="sc">$</span>ictpc_pers</span>
<span id="cb13-4"><a href="union_bases.html#cb13-4" tabindex="-1"></a>   enigh<span class="sc">$</span>ic_segsoc</span></code></pre></div>
<ul>
<li><code>enigh$ic_ali_nc</code>: Selección de la variable que indica carencia por acceso a la alimentación nutritiva y de calidad.</li>
<li><code>enigh$ictpc_pers</code>: Selección de la variable que representa el ingreso corriente total por persona.</li>
<li><code>enigh$ictpc &lt;- enigh$ictpc_pers</code>: Renombramiento de <code>ictpc_pers</code> a <code>ictpc</code> para simplificar su uso en análisis posteriores.</li>
<li><code>enigh$ic_segsoc</code>: Selección de la variable que indica carencia por acceso a la seguridad social.</li>
</ul>
</div>
<div id="guardado-del-dataframe-combinado" class="section level4 unnumbered hasAnchor">
<h4>Guardado del DataFrame Combinado<a href="union_bases.html#guardado-del-dataframe-combinado" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Finalmente, se guarda el dataframe combinado en un archivo <code>.rds</code> para facilitar el acceso y análisis futuros.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="union_bases.html#cb14-1" tabindex="-1"></a>   <span class="fu">saveRDS</span>(enigh, <span class="at">file =</span> <span class="st">&quot;../output/2020/enigh.rds&quot;</span>)</span></code></pre></div>
<p>Se guarda el dataframe <code>enigh</code> en un archivo <code>.rds</code> en la ruta especificada <code>../output/2020/enigh.rds</code>.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="indicadores-estimados.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="descarga_satelitales.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/psirusteam/2023MEXsae/00_union_bases.qmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Manual de procesamiento del indicador de pobreza multidimensional mediante el uso de estimación de áreas pequeñas para México 2020.pdf", "Manual de procesamiento del indicador de pobreza multidimensional mediante el uso de estimación de áreas pequeñas para México 2020.epub", "Manual de procesamiento del indicador de pobreza multidimensional mediante el uso de estimación de áreas pequeñas para México 2020.mobi"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
},
"tconfig": null
});
});
</script>

</body>

</html>
