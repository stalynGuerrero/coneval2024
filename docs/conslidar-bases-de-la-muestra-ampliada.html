<!DOCTYPE html>
<html lang="es" xml:lang="es">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Conslidar bases de la muestra ampliada | Manual de procesamiento del indicador de pobreza multidimensional mediante el uso de estimación de áreas pequeñas para México 2024</title>
  <meta name="description" content="Manual de procesamiento." />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="Conslidar bases de la muestra ampliada | Manual de procesamiento del indicador de pobreza multidimensional mediante el uso de estimación de áreas pequeñas para México 2024" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Manual de procesamiento." />
  <meta name="github-repo" content="psirusteam/coneval" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Conslidar bases de la muestra ampliada | Manual de procesamiento del indicador de pobreza multidimensional mediante el uso de estimación de áreas pequeñas para México 2024" />
  
  <meta name="twitter:description" content="Manual de procesamiento." />
  

<meta name="author" content="Andrés Gutiérrez, Stalyn Guerrero" />


<meta name="date" content="2024-07-26" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="obtener-la-lista-de-archivos-.html"/>
<link rel="next" href="cambiando-de-formato-.dta-a-.rds-la-base-de-la-enigh..html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Taller de instalación de capacidades en SAE</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introducción</a>
<ul>
<li class="chapter" data-level="" data-path="respositodio-de-códigos.html"><a href="respositodio-de-códigos.html"><i class="fa fa-check"></i>Respositodio de códigos</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="librerias-de-r-y-otros-insumos.html"><a href="librerias-de-r-y-otros-insumos.html"><i class="fa fa-check"></i><b>2</b> Librerias de <em>R</em> y otros insumos</a>
<ul>
<li class="chapter" data-level="2.1" data-path="librerías-utilizadas.html"><a href="librerías-utilizadas.html"><i class="fa fa-check"></i><b>2.1</b> Librerías Utilizadas</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="librerías-utilizadas.html"><a href="librerías-utilizadas.html#manipulación-y-transformación-de-datos"><i class="fa fa-check"></i><b>2.1.1</b> Manipulación y Transformación de Datos</a></li>
<li class="chapter" data-level="2.1.2" data-path="librerías-utilizadas.html"><a href="librerías-utilizadas.html#lectura-y-escritura-de-datos"><i class="fa fa-check"></i><b>2.1.2</b> Lectura y Escritura de Datos</a></li>
<li class="chapter" data-level="2.1.3" data-path="librerías-utilizadas.html"><a href="librerías-utilizadas.html#análisis-de-datos-de-encuestas"><i class="fa fa-check"></i><b>2.1.3</b> Análisis de Datos de Encuestas</a></li>
<li class="chapter" data-level="2.1.4" data-path="librerías-utilizadas.html"><a href="librerías-utilizadas.html#modelado-y-análisis-estadístico"><i class="fa fa-check"></i><b>2.1.4</b> Modelado y Análisis Estadístico</a></li>
<li class="chapter" data-level="2.1.5" data-path="librerías-utilizadas.html"><a href="librerías-utilizadas.html#visualización-de-datos"><i class="fa fa-check"></i><b>2.1.5</b> Visualización de Datos</a></li>
<li class="chapter" data-level="2.1.6" data-path="librerías-utilizadas.html"><a href="librerías-utilizadas.html#informes-y-reproducibilidad"><i class="fa fa-check"></i><b>2.1.6</b> Informes y Reproducibilidad</a></li>
<li class="chapter" data-level="2.1.7" data-path="librerías-utilizadas.html"><a href="librerías-utilizadas.html#integración-con-otros-lenguajes"><i class="fa fa-check"></i><b>2.1.7</b> Integración con Otros Lenguajes</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="bases-de-datos-utilizadas.html"><a href="bases-de-datos-utilizadas.html"><i class="fa fa-check"></i><b>2.2</b> Bases de Datos Utilizadas</a></li>
<li class="chapter" data-level="2.3" data-path="estructura-del-proyecto.html"><a href="estructura-del-proyecto.html"><i class="fa fa-check"></i><b>2.3</b> Estructura del Proyecto</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="lectura-y-consolidación-de-bases-de-datos.html"><a href="lectura-y-consolidación-de-bases-de-datos.html"><i class="fa fa-check"></i><b>3</b> Lectura y consolidación de bases de datos</a>
<ul>
<li class="chapter" data-level="" data-path="limpieza-del-espacio-de-trabajo.html"><a href="limpieza-del-espacio-de-trabajo.html"><i class="fa fa-check"></i>Limpieza del espacio de trabajo</a></li>
<li class="chapter" data-level="" data-path="carga-de-bibliotecas.html"><a href="carga-de-bibliotecas.html"><i class="fa fa-check"></i>Carga de bibliotecas</a></li>
<li class="chapter" data-level="" data-path="definición-de-variables-para-validación.html"><a href="definición-de-variables-para-validación.html"><i class="fa fa-check"></i>Definición de variables para validación</a></li>
<li class="chapter" data-level="" data-path="obtener-la-lista-de-archivos-.html"><a href="obtener-la-lista-de-archivos-.html"><i class="fa fa-check"></i>Obtener la lista de archivos .dta</a></li>
<li class="chapter" data-level="" data-path="conslidar-bases-de-la-muestra-ampliada.html"><a href="conslidar-bases-de-la-muestra-ampliada.html"><i class="fa fa-check"></i>Conslidar bases de la muestra ampliada</a></li>
<li class="chapter" data-level="3.1" data-path="cambiando-de-formato-.dta-a-.rds-la-base-de-la-enigh..html"><a href="cambiando-de-formato-.dta-a-.rds-la-base-de-la-enigh..html"><i class="fa fa-check"></i><b>3.1</b> Cambiando de formato .dta a .rds la base de la ENIGH.</a></li>
</ul></li>
<li class="divider"></li>
<li><a Taller de instalación de capacidades en SAE </a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Manual de procesamiento del indicador de pobreza multidimensional mediante el uso de estimación de áreas pequeñas para México 2024</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="conslidar-bases-de-la-muestra-ampliada" class="section level2 unnumbered hasAnchor">
<h2>Conslidar bases de la muestra ampliada<a href="conslidar-bases-de-la-muestra-ampliada.html#conslidar-bases-de-la-muestra-ampliada" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>El código inicia creando un dataframe vacío y cargando las bibliotecas necesarias para el análisis de datos. Luego, itera sobre los archivos <code>.dta</code> para leer y combinar datos de diferentes fuentes, realizando uniones internas y ajustes según sea necesario. Cada conjunto de datos combinado se guarda en archivos <code>.rds</code> individuales durante el proceso. Después, los datos combinados de cada archivo se acumulan en un dataframe principal. Finalmente, el dataframe completo se guarda en un archivo <code>.rds</code>. Este procedimiento facilita la integración y el análisis de grandes volúmenes de datos provenientes de diversas fuentes.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-1" tabindex="-1"></a><span class="co"># Crear un dataframe vacío para almacenar los datos</span></span>
<span id="cb10-2"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb10-3"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-3" tabindex="-1"></a></span>
<span id="cb10-4"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-4" tabindex="-1"></a><span class="co"># Iterar sobre cada archivo y leerlo</span></span>
<span id="cb10-5"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-5" tabindex="-1"></a><span class="cf">for</span> (ii <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">32</span>) {</span>
<span id="cb10-6"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-6" tabindex="-1"></a>  muestra_censo_2020_estado_ii <span class="ot">&lt;-</span></span>
<span id="cb10-7"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-7" tabindex="-1"></a>    <span class="fu">read_dta</span>(file_muestra_censo_2020_estado[ii])</span>
<span id="cb10-8"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-8" tabindex="-1"></a> </span>
<span id="cb10-9"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-9" tabindex="-1"></a>   muestra_censo_2020_estado_complemento_ii <span class="ot">&lt;-</span></span>
<span id="cb10-10"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-10" tabindex="-1"></a>    <span class="fu">read_dta</span>(file_muestra_censo_2020_estado_complemento[ii]) <span class="sc">%&gt;%</span></span>
<span id="cb10-11"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-11" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">id_per =</span> id_persona)</span>
<span id="cb10-12"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-12" tabindex="-1"></a>  </span>
<span id="cb10-13"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-13" tabindex="-1"></a>   muestra_cuestionario_ampliado_censo_2020_estado_ii <span class="ot">&lt;-</span></span>
<span id="cb10-14"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-14" tabindex="-1"></a>    <span class="fu">read_dta</span>(muestra_cuestionario_ampliado_censo_2020_estado[ii])</span>
<span id="cb10-15"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-15" tabindex="-1"></a>  </span>
<span id="cb10-16"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-16" tabindex="-1"></a>  muestra_censo <span class="ot">&lt;-</span></span>
<span id="cb10-17"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-17" tabindex="-1"></a>    <span class="fu">inner_join</span>(muestra_censo_2020_estado_ii,</span>
<span id="cb10-18"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-18" tabindex="-1"></a>               muestra_censo_2020_estado_complemento_ii) <span class="sc">%&gt;%</span></span>
<span id="cb10-19"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-19" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>tamloc) <span class="sc">%&gt;%</span></span>
<span id="cb10-20"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-20" tabindex="-1"></a>    <span class="fu">inner_join</span>(muestra_cuestionario_ampliado_censo_2020_estado_ii)</span>
<span id="cb10-21"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-21" tabindex="-1"></a>  </span>
<span id="cb10-22"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-22" tabindex="-1"></a>  <span class="fu">saveRDS</span>(muestra_censo,</span>
<span id="cb10-23"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-23" tabindex="-1"></a>          <span class="fu">paste0</span>(<span class="st">&quot;output/2020/muestra_censo/depto_&quot;</span>, ii, <span class="st">&quot;.rds&quot;</span>))</span>
<span id="cb10-24"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-24" tabindex="-1"></a>  </span>
<span id="cb10-25"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-25" tabindex="-1"></a>  df <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(df, muestra_censo)</span>
<span id="cb10-26"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-26" tabindex="-1"></a>  <span class="fu">cat</span>(file_muestra_censo_2020_estado[ii], <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb10-27"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-27" tabindex="-1"></a>}</span>
<span id="cb10-28"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-28" tabindex="-1"></a></span>
<span id="cb10-29"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-29" tabindex="-1"></a><span class="co"># Guardar el dataframe en un archivo .rds</span></span>
<span id="cb10-30"><a href="conslidar-bases-de-la-muestra-ampliada.html#cb10-30" tabindex="-1"></a><span class="fu">saveRDS</span>(df, <span class="at">file =</span> <span class="st">&quot;output/2020/muestra_cuestionario_ampliado.rds&quot;</span>)</span></code></pre></div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="obtener-la-lista-de-archivos-.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="cambiando-de-formato-.dta-a-.rds-la-base-de-la-enigh..html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/psirusteam/2023MEXsae/00_union_bases.qmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Fortalecimiento de capacidades en Técnicas de Estimación en Áreas Pequeñas con enfoque Bayesiano para la desagregación de datos.pdf", "Fortalecimiento de capacidades en Técnicas de Estimación en Áreas Pequeñas con enfoque Bayesiano para la desagregación de datos.epub", "Fortalecimiento de capacidades en Técnicas de Estimación en Áreas Pequeñas con enfoque Bayesiano para la desagregación de datos.mobi"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
},
"tconfig": null
});
});
</script>

</body>

</html>
