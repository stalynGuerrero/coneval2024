<!DOCTYPE html>
<html lang="es" xml:lang="es">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4.2 Preparación de la Shapefile | Manual de procesamiento del indicador de pobreza multidimensional mediante el uso de estimación de áreas pequeñas para México 2024</title>
  <meta name="description" content="Manual de procesamiento." />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="4.2 Preparación de la Shapefile | Manual de procesamiento del indicador de pobreza multidimensional mediante el uso de estimación de áreas pequeñas para México 2024" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Manual de procesamiento." />
  <meta name="github-repo" content="psirusteam/coneval" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4.2 Preparación de la Shapefile | Manual de procesamiento del indicador de pobreza multidimensional mediante el uso de estimación de áreas pequeñas para México 2024" />
  
  <meta name="twitter:description" content="Manual de procesamiento." />
  

<meta name="author" content="Andrés Gutiérrez, Stalyn Guerrero" />


<meta name="date" content="2024-07-29" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="configurar-el-entorno-de-r.html"/>
<link rel="next" href="conslidar-y-guardar-las-variables-satelitales.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Taller de instalación de capacidades en SAE</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introducción</a>
<ul>
<li class="chapter" data-level="" data-path="respositodio-de-códigos.html"><a href="respositodio-de-códigos.html"><i class="fa fa-check"></i>Respositodio de códigos</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="librerias-de-r-y-otros-insumos.html"><a href="librerias-de-r-y-otros-insumos.html"><i class="fa fa-check"></i><b>2</b> Librerias de <em>R</em> y otros insumos</a>
<ul>
<li class="chapter" data-level="2.1" data-path="librerías-utilizadas.html"><a href="librerías-utilizadas.html"><i class="fa fa-check"></i><b>2.1</b> Librerías Utilizadas</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="librerías-utilizadas.html"><a href="librerías-utilizadas.html#manipulación-y-transformación-de-datos"><i class="fa fa-check"></i><b>2.1.1</b> Manipulación y Transformación de Datos</a></li>
<li class="chapter" data-level="2.1.2" data-path="librerías-utilizadas.html"><a href="librerías-utilizadas.html#lectura-y-escritura-de-datos"><i class="fa fa-check"></i><b>2.1.2</b> Lectura y Escritura de Datos</a></li>
<li class="chapter" data-level="2.1.3" data-path="librerías-utilizadas.html"><a href="librerías-utilizadas.html#análisis-de-datos-de-encuestas"><i class="fa fa-check"></i><b>2.1.3</b> Análisis de Datos de Encuestas</a></li>
<li class="chapter" data-level="2.1.4" data-path="librerías-utilizadas.html"><a href="librerías-utilizadas.html#modelado-y-análisis-estadístico"><i class="fa fa-check"></i><b>2.1.4</b> Modelado y Análisis Estadístico</a></li>
<li class="chapter" data-level="2.1.5" data-path="librerías-utilizadas.html"><a href="librerías-utilizadas.html#visualización-de-datos"><i class="fa fa-check"></i><b>2.1.5</b> Visualización de Datos</a></li>
<li class="chapter" data-level="2.1.6" data-path="librerías-utilizadas.html"><a href="librerías-utilizadas.html#informes-y-reproducibilidad"><i class="fa fa-check"></i><b>2.1.6</b> Informes y Reproducibilidad</a></li>
<li class="chapter" data-level="2.1.7" data-path="librerías-utilizadas.html"><a href="librerías-utilizadas.html#integración-con-otros-lenguajes"><i class="fa fa-check"></i><b>2.1.7</b> Integración con Otros Lenguajes</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="bases-de-datos-utilizadas.html"><a href="bases-de-datos-utilizadas.html"><i class="fa fa-check"></i><b>2.2</b> Bases de Datos Utilizadas</a></li>
<li class="chapter" data-level="2.3" data-path="estructura-del-proyecto.html"><a href="estructura-del-proyecto.html"><i class="fa fa-check"></i><b>2.3</b> Estructura del Proyecto</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="lectura-y-consolidación-de-bases-de-datos.html"><a href="lectura-y-consolidación-de-bases-de-datos.html"><i class="fa fa-check"></i><b>3</b> Lectura y consolidación de bases de datos</a>
<ul>
<li class="chapter" data-level="3.1" data-path="consolidando-la-base-de-datos-de-la-encuesta-ampliada-del-censo.html"><a href="consolidando-la-base-de-datos-de-la-encuesta-ampliada-del-censo.html"><i class="fa fa-check"></i><b>3.1</b> Consolidando la base de datos de la encuesta ampliada del censo</a>
<ul>
<li class="chapter" data-level="" data-path="consolidando-la-base-de-datos-de-la-encuesta-ampliada-del-censo.html"><a href="consolidando-la-base-de-datos-de-la-encuesta-ampliada-del-censo.html#limpieza-del-espacio-de-trabajo"><i class="fa fa-check"></i>Limpieza del espacio de trabajo</a></li>
<li class="chapter" data-level="" data-path="consolidando-la-base-de-datos-de-la-encuesta-ampliada-del-censo.html"><a href="consolidando-la-base-de-datos-de-la-encuesta-ampliada-del-censo.html#carga-de-bibliotecas"><i class="fa fa-check"></i>Carga de bibliotecas</a></li>
<li class="chapter" data-level="" data-path="consolidando-la-base-de-datos-de-la-encuesta-ampliada-del-censo.html"><a href="consolidando-la-base-de-datos-de-la-encuesta-ampliada-del-censo.html#definición-de-variables-para-validación"><i class="fa fa-check"></i>Definición de variables para validación</a></li>
<li class="chapter" data-level="" data-path="consolidando-la-base-de-datos-de-la-encuesta-ampliada-del-censo.html"><a href="consolidando-la-base-de-datos-de-la-encuesta-ampliada-del-censo.html#obtener-la-lista-de-archivos-.dta"><i class="fa fa-check"></i>Obtener la lista de archivos .dta</a></li>
<li class="chapter" data-level="" data-path="consolidando-la-base-de-datos-de-la-encuesta-ampliada-del-censo.html"><a href="consolidando-la-base-de-datos-de-la-encuesta-ampliada-del-censo.html#conslidar-bases-de-la-muestra-ampliada"><i class="fa fa-check"></i>Conslidar bases de la muestra ampliada</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="cambiando-de-formato-.dta-a-.rds-la-base-de-la-enigh..html"><a href="cambiando-de-formato-.dta-a-.rds-la-base-de-la-enigh..html"><i class="fa fa-check"></i><b>3.2</b> Cambiando de formato .dta a .rds la base de la ENIGH.</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="proceso-para-la-descarga-de-imágenes-satelitales.html"><a href="proceso-para-la-descarga-de-imágenes-satelitales.html"><i class="fa fa-check"></i><b>4</b> Proceso para la descarga de imágenes satelitales</a>
<ul>
<li class="chapter" data-level="4.1" data-path="configurar-el-entorno-de-r.html"><a href="configurar-el-entorno-de-r.html"><i class="fa fa-check"></i><b>4.1</b> Configurar el entorno de <em>R</em></a></li>
<li class="chapter" data-level="4.2" data-path="preparación-de-la-shapefile.html"><a href="preparación-de-la-shapefile.html"><i class="fa fa-check"></i><b>4.2</b> Preparación de la <strong>Shapefile</strong></a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="preparación-de-la-shapefile.html"><a href="preparación-de-la-shapefile.html#definición-del-sistema-de-referencia-espacial"><i class="fa fa-check"></i><b>4.2.1</b> Definición del Sistema de Referencia Espacial</a></li>
<li class="chapter" data-level="4.2.2" data-path="preparación-de-la-shapefile.html"><a href="preparación-de-la-shapefile.html#transformación-y-combinación-de-shapefiles"><i class="fa fa-check"></i><b>4.2.2</b> Transformación y Combinación de Shapefiles</a></li>
<li class="chapter" data-level="4.2.3" data-path="preparación-de-la-shapefile.html"><a href="preparación-de-la-shapefile.html#corrección-de-la-codificación-de-los-nombres-geográficos"><i class="fa fa-check"></i><b>4.2.3</b> Corrección de la Codificación de los Nombres Geográficos</a></li>
<li class="chapter" data-level="4.2.4" data-path="preparación-de-la-shapefile.html"><a href="preparación-de-la-shapefile.html#guardado-del-shapefile-transformado"><i class="fa fa-check"></i><b>4.2.4</b> Guardado del Shapefile Transformado</a></li>
<li class="chapter" data-level="4.2.5" data-path="preparación-de-la-shapefile.html"><a href="preparación-de-la-shapefile.html#limpieza-del-espacio-de-trabajo-1"><i class="fa fa-check"></i><b>4.2.5</b> Limpieza del Espacio de Trabajo</a></li>
<li class="chapter" data-level="4.2.6" data-path="preparación-de-la-shapefile.html"><a href="preparación-de-la-shapefile.html#lectura-de-shapefile-transformado"><i class="fa fa-check"></i><b>4.2.6</b> Lectura de Shapefile Transformado</a></li>
<li class="chapter" data-level="4.2.7" data-path="preparación-de-la-shapefile.html"><a href="preparación-de-la-shapefile.html#cobertura-urbana-y-uso-del-suelo"><i class="fa fa-check"></i><b>4.2.7</b> Cobertura urbana y uso del suelo</a></li>
<li class="chapter" data-level="4.2.8" data-path="preparación-de-la-shapefile.html"><a href="preparación-de-la-shapefile.html#distancia-a-hospitales"><i class="fa fa-check"></i><b>4.2.8</b> Distancia a hospitales</a></li>
<li class="chapter" data-level="4.2.9" data-path="preparación-de-la-shapefile.html"><a href="preparación-de-la-shapefile.html#global-human-modification-ghm"><i class="fa fa-check"></i><b>4.2.9</b> Global Human Modification (GHM)</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="conslidar-y-guardar-las-variables-satelitales.html"><a href="conslidar-y-guardar-las-variables-satelitales.html"><i class="fa fa-check"></i><b>4.3</b> Conslidar y guardar las variables satelitales</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="integración-de-bases-de-datos-predictoras..html"><a href="integración-de-bases-de-datos-predictoras..html"><i class="fa fa-check"></i><b>5</b> Integración de bases de datos predictoras.</a></li>
<li class="divider"></li>
<li><a Taller de instalación de capacidades en SAE </a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Manual de procesamiento del indicador de pobreza multidimensional mediante el uso de estimación de áreas pequeñas para México 2024</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="preparación-de-la-shapefile" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Preparación de la <strong>Shapefile</strong><a href="preparación-de-la-shapefile.html#preparación-de-la-shapefile" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Se leen todos los archivos shapefile en el directorio especificado, seleccionando las columnas relevantes y utilizando procesamiento paralelo para mejorar la velocidad.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="preparación-de-la-shapefile.html#cb16-1" tabindex="-1"></a><span class="co"># Leer y seleccionar shapefiles</span></span>
<span id="cb16-2"><a href="preparación-de-la-shapefile.html#cb16-2" tabindex="-1"></a>MEX <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">&quot;../shapefile/2020/&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot;shp$&quot;</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="preparación-de-la-shapefile.html#cb16-3" tabindex="-1"></a>  furrr<span class="sc">::</span><span class="fu">future_map</span>(<span class="sc">~</span><span class="fu">read_sf</span>(.x) <span class="sc">%&gt;%</span></span>
<span id="cb16-4"><a href="preparación-de-la-shapefile.html#cb16-4" tabindex="-1"></a>                      <span class="fu">select</span>(CVEGEO, NOM_ENT, NOMGEO, geometry),</span>
<span id="cb16-5"><a href="preparación-de-la-shapefile.html#cb16-5" tabindex="-1"></a>                    <span class="at">.progress =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<div id="definición-del-sistema-de-referencia-espacial" class="section level3 hasAnchor" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Definición del Sistema de Referencia Espacial<a href="preparación-de-la-shapefile.html#definición-del-sistema-de-referencia-espacial" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Se define el sistema de referencia espacial WGS84 para la transformación de coordenadas.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="preparación-de-la-shapefile.html#cb17-1" tabindex="-1"></a>mi_crs <span class="ot">&lt;-</span> <span class="st">&quot;+proj=longlat +datum=WGS84&quot;</span></span></code></pre></div>
</div>
<div id="transformación-y-combinación-de-shapefiles" class="section level3 hasAnchor" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Transformación y Combinación de Shapefiles<a href="preparación-de-la-shapefile.html#transformación-y-combinación-de-shapefiles" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Se transforman las coordenadas de los shapefiles al sistema de referencia espacial WGS84 y se asegura que las geometrías sean de tipo <code>MULTIPOLYGON</code>. Luego, se combinan todos los shapefiles transformados en un único dataframe espacial.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="preparación-de-la-shapefile.html#cb18-1" tabindex="-1"></a><span class="co"># Transformar y combinar shapefiles</span></span>
<span id="cb18-2"><a href="preparación-de-la-shapefile.html#cb18-2" tabindex="-1"></a>MEX_trans <span class="ot">&lt;-</span> <span class="fu">map</span>(MEX,  <span class="sc">~</span><span class="fu">st_transform</span>(.x, <span class="at">crs =</span> mi_crs))</span>
<span id="cb18-3"><a href="preparación-de-la-shapefile.html#cb18-3" tabindex="-1"></a>MEX_trans <span class="ot">&lt;-</span> <span class="fu">map</span>(MEX_trans,  <span class="sc">~</span><span class="fu">st_cast</span>(.x, <span class="st">&quot;MULTIPOLYGON&quot;</span>))</span>
<span id="cb18-4"><a href="preparación-de-la-shapefile.html#cb18-4" tabindex="-1"></a>MEX_trans <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(MEX_trans)</span></code></pre></div>
</div>
<div id="corrección-de-la-codificación-de-los-nombres-geográficos" class="section level3 hasAnchor" number="4.2.3">
<h3><span class="header-section-number">4.2.3</span> Corrección de la Codificación de los Nombres Geográficos<a href="preparación-de-la-shapefile.html#corrección-de-la-codificación-de-los-nombres-geográficos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Se convierte la codificación de los nombres geográficos a UTF-8 para asegurar la correcta visualización de caracteres especiales.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="preparación-de-la-shapefile.html#cb19-1" tabindex="-1"></a><span class="co"># Corregir la codificación de los nombres geográficos</span></span>
<span id="cb19-2"><a href="preparación-de-la-shapefile.html#cb19-2" tabindex="-1"></a>MEX_trans<span class="sc">$</span>NOMGEO <span class="ot">&lt;-</span> <span class="fu">iconv</span>(MEX_trans<span class="sc">$</span>NOMGEO, <span class="at">to =</span> <span class="st">&quot;UTF-8&quot;</span>, <span class="at">from =</span> <span class="st">&quot;ISO-8859-1&quot;</span>)</span></code></pre></div>
</div>
<div id="guardado-del-shapefile-transformado" class="section level3 hasAnchor" number="4.2.4">
<h3><span class="header-section-number">4.2.4</span> Guardado del Shapefile Transformado<a href="preparación-de-la-shapefile.html#guardado-del-shapefile-transformado" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Se escribe el shapefile transformado y unificado en un nuevo archivo en el directorio especificado.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="preparación-de-la-shapefile.html#cb20-1" tabindex="-1"></a><span class="co"># Guardar el shapefile transformado</span></span>
<span id="cb20-2"><a href="preparación-de-la-shapefile.html#cb20-2" tabindex="-1"></a><span class="fu">st_write</span>(MEX_trans, <span class="st">&quot;shapefile/2020/MEX_2020.shp&quot;</span>, <span class="at">append =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
<div id="limpieza-del-espacio-de-trabajo-1" class="section level3 hasAnchor" number="4.2.5">
<h3><span class="header-section-number">4.2.5</span> Limpieza del Espacio de Trabajo<a href="preparación-de-la-shapefile.html#limpieza-del-espacio-de-trabajo-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Se limpia el espacio de trabajo eliminando todos los objetos para liberar memoria.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="preparación-de-la-shapefile.html#cb21-1" tabindex="-1"></a><span class="co"># Limpiar el espacio de trabajo</span></span>
<span id="cb21-2"><a href="preparación-de-la-shapefile.html#cb21-2" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span></code></pre></div>
</div>
<div id="lectura-de-shapefile-transformado" class="section level3 hasAnchor" number="4.2.6">
<h3><span class="header-section-number">4.2.6</span> Lectura de Shapefile Transformado<a href="preparación-de-la-shapefile.html#lectura-de-shapefile-transformado" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Este script carga un shapefile transformado que contiene información geográfica de México, añade una columna con los códigos de entidad, y extrae datos de luminosidad nocturna del conjunto de datos NOAA/VIIRS para el año 2020, transformando las imágenes seleccionadas en una banda que representa la luminosidad promedio anual. Los datos extraídos se combinan en un solo dataframe, se filtran para identificar y manejar valores faltantes, y finalmente se guardan en un archivo RDS para su uso posterior.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="preparación-de-la-shapefile.html#cb22-1" tabindex="-1"></a><span class="co"># Leer el shapefile transformado</span></span>
<span id="cb22-2"><a href="preparación-de-la-shapefile.html#cb22-2" tabindex="-1"></a>MEX <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(<span class="st">&quot;shapefile/2020/MEX_2020.shp&quot;</span>)</span>
<span id="cb22-3"><a href="preparación-de-la-shapefile.html#cb22-3" tabindex="-1"></a></span>
<span id="cb22-4"><a href="preparación-de-la-shapefile.html#cb22-4" tabindex="-1"></a><span class="co"># Añadir una nueva columna con la entidad (los primeros dos caracteres de CVEGEO)</span></span>
<span id="cb22-5"><a href="preparación-de-la-shapefile.html#cb22-5" tabindex="-1"></a>MEX <span class="sc">%&lt;&gt;%</span> <span class="fu">mutate</span>(<span class="at">ent =</span> <span class="fu">substr</span>(CVEGEO, <span class="dv">1</span>, <span class="dv">2</span>))</span>
<span id="cb22-6"><a href="preparación-de-la-shapefile.html#cb22-6" tabindex="-1"></a></span>
<span id="cb22-7"><a href="preparación-de-la-shapefile.html#cb22-7" tabindex="-1"></a><span class="co"># Selección de datos de luminosidad nocturna de la colección de imágenes NOAA/VIIRS</span></span>
<span id="cb22-8"><a href="preparación-de-la-shapefile.html#cb22-8" tabindex="-1"></a><span class="co"># Enlace: https://developers.google.com/earth-engine/datasets/catalog/NOAA_VIIRS_DNB_ANNUAL_V21#bands</span></span>
<span id="cb22-9"><a href="preparación-de-la-shapefile.html#cb22-9" tabindex="-1"></a></span>
<span id="cb22-10"><a href="preparación-de-la-shapefile.html#cb22-10" tabindex="-1"></a><span class="co"># Cargar la colección de imágenes VIIRS-DNB y filtrar por el año 2020</span></span>
<span id="cb22-11"><a href="preparación-de-la-shapefile.html#cb22-11" tabindex="-1"></a>luces <span class="ot">=</span> ee<span class="sc">$</span><span class="fu">ImageCollection</span>(<span class="st">&quot;NOAA/VIIRS/DNB/ANNUAL_V21&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-12"><a href="preparación-de-la-shapefile.html#cb22-12" tabindex="-1"></a>  ee<span class="sc">$</span>ImageCollection<span class="sc">$</span><span class="fu">filterDate</span>(<span class="st">&quot;2020-01-01&quot;</span>, <span class="st">&quot;2021-01-01&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-13"><a href="preparación-de-la-shapefile.html#cb22-13" tabindex="-1"></a>  ee<span class="sc">$</span>ImageCollection<span class="sc">$</span><span class="fu">map</span>(<span class="cf">function</span>(x) x<span class="sc">$</span><span class="fu">select</span>(<span class="st">&quot;average&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb22-14"><a href="preparación-de-la-shapefile.html#cb22-14" tabindex="-1"></a>  ee<span class="sc">$</span>ImageCollection<span class="sc">$</span><span class="fu">toBands</span>()</span>
<span id="cb22-15"><a href="preparación-de-la-shapefile.html#cb22-15" tabindex="-1"></a></span>
<span id="cb22-16"><a href="preparación-de-la-shapefile.html#cb22-16" tabindex="-1"></a><span class="co"># Imprimir la estructura de la colección de imágenes para ver detalles de las bandas</span></span>
<span id="cb22-17"><a href="preparación-de-la-shapefile.html#cb22-17" tabindex="-1"></a><span class="fu">ee_print</span>(luces)</span>
<span id="cb22-18"><a href="preparación-de-la-shapefile.html#cb22-18" tabindex="-1"></a></span>
<span id="cb22-19"><a href="preparación-de-la-shapefile.html#cb22-19" tabindex="-1"></a><span class="co"># Extraer valores de luminosidad nocturna para cada entidad en MEX</span></span>
<span id="cb22-20"><a href="preparación-de-la-shapefile.html#cb22-20" tabindex="-1"></a>MEX_luces <span class="ot">&lt;-</span> <span class="fu">map</span>(<span class="fu">unique</span>(MEX<span class="sc">$</span>ent),</span>
<span id="cb22-21"><a href="preparación-de-la-shapefile.html#cb22-21" tabindex="-1"></a>                 <span class="sc">~</span><span class="fu">tryCatch</span>(<span class="fu">ee_extract</span>(</span>
<span id="cb22-22"><a href="preparación-de-la-shapefile.html#cb22-22" tabindex="-1"></a>                   <span class="at">x =</span> luces,</span>
<span id="cb22-23"><a href="preparación-de-la-shapefile.html#cb22-23" tabindex="-1"></a>                   <span class="at">y =</span> MEX[<span class="fu">c</span>(<span class="st">&quot;ent&quot;</span>, <span class="st">&quot;CVEGEO&quot;</span>)] <span class="sc">%&gt;%</span></span>
<span id="cb22-24"><a href="preparación-de-la-shapefile.html#cb22-24" tabindex="-1"></a>                     <span class="fu">filter</span>(ent <span class="sc">==</span> .x),</span>
<span id="cb22-25"><a href="preparación-de-la-shapefile.html#cb22-25" tabindex="-1"></a>                   ee<span class="sc">$</span>Reducer<span class="sc">$</span><span class="fu">mean</span>(),</span>
<span id="cb22-26"><a href="preparación-de-la-shapefile.html#cb22-26" tabindex="-1"></a>                   <span class="at">sf =</span> <span class="cn">FALSE</span></span>
<span id="cb22-27"><a href="preparación-de-la-shapefile.html#cb22-27" tabindex="-1"></a>                 ), </span>
<span id="cb22-28"><a href="preparación-de-la-shapefile.html#cb22-28" tabindex="-1"></a>                 <span class="at">error =</span> <span class="cf">function</span>(e) <span class="fu">data.frame</span>(<span class="at">ent =</span> .x))</span>
<span id="cb22-29"><a href="preparación-de-la-shapefile.html#cb22-29" tabindex="-1"></a>)</span>
<span id="cb22-30"><a href="preparación-de-la-shapefile.html#cb22-30" tabindex="-1"></a></span>
<span id="cb22-31"><a href="preparación-de-la-shapefile.html#cb22-31" tabindex="-1"></a><span class="co"># Combinar los resultados en un solo dataframe</span></span>
<span id="cb22-32"><a href="preparación-de-la-shapefile.html#cb22-32" tabindex="-1"></a>MEX_luces <span class="sc">%&lt;&gt;%</span> <span class="fu">bind_rows</span>()</span>
<span id="cb22-33"><a href="preparación-de-la-shapefile.html#cb22-33" tabindex="-1"></a></span>
<span id="cb22-34"><a href="preparación-de-la-shapefile.html#cb22-34" tabindex="-1"></a><span class="co"># Filtrar y mostrar las filas con valores faltantes en la columna de luminosidad promedio</span></span>
<span id="cb22-35"><a href="preparación-de-la-shapefile.html#cb22-35" tabindex="-1"></a>MEX_luces <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(X20200101_average)) <span class="sc">%&gt;%</span> <span class="fu">select</span>(CVEGEO)</span>
<span id="cb22-36"><a href="preparación-de-la-shapefile.html#cb22-36" tabindex="-1"></a></span>
<span id="cb22-37"><a href="preparación-de-la-shapefile.html#cb22-37" tabindex="-1"></a><span class="co"># Guardar los datos de luminosidad en un archivo RDS</span></span>
<span id="cb22-38"><a href="preparación-de-la-shapefile.html#cb22-38" tabindex="-1"></a><span class="fu">saveRDS</span>(MEX_luces, <span class="st">&quot;output/2020/Satelital/MEX_luces.rds&quot;</span>)</span></code></pre></div>
</div>
<div id="cobertura-urbana-y-uso-del-suelo" class="section level3 hasAnchor" number="4.2.7">
<h3><span class="header-section-number">4.2.7</span> Cobertura urbana y uso del suelo<a href="preparación-de-la-shapefile.html#cobertura-urbana-y-uso-del-suelo" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>El código realiza el procesamiento de datos relacionados con el uso del suelo y la cobertura urbana y de cultivos en México para el año 2019. Primero, carga la colección de imágenes de la serie Proba-V Landcover, que proporciona datos sobre fracciones de cobertura urbana y de cultivos. Luego, se filtra esta colección para el año 2019 y se seleccionan las bandas relevantes para analizar estas fracciones. Posteriormente, el código extrae estas fracciones para cada entidad geográfica en México, calculando la media de las bandas seleccionadas y manejando errores que puedan surgir durante el proceso. Los resultados se combinan en un solo dataframe y se revisan los datos para identificar cualquier valor faltante en las fracciones de cultivos y cobertura urbana. Finalmente, el dataframe resultante se guarda en un archivo RDS para su uso futuro.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="preparación-de-la-shapefile.html#cb23-1" tabindex="-1"></a>tiposuelo <span class="ot">=</span> ee<span class="sc">$</span><span class="fu">ImageCollection</span>(<span class="st">&quot;COPERNICUS/Landcover/100m/Proba-V-C3/Global&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="preparación-de-la-shapefile.html#cb23-2" tabindex="-1"></a>  ee<span class="sc">$</span>ImageCollection<span class="sc">$</span><span class="fu">filterDate</span>(<span class="st">&quot;2019-01-01&quot;</span>, <span class="st">&quot;2019-12-31&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="preparación-de-la-shapefile.html#cb23-3" tabindex="-1"></a>  ee<span class="sc">$</span>ImageCollection<span class="sc">$</span><span class="fu">map</span>(<span class="cf">function</span>(x) x<span class="sc">$</span><span class="fu">select</span>(<span class="st">&quot;urban-coverfraction&quot;</span>, <span class="st">&quot;crops-coverfraction&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb23-4"><a href="preparación-de-la-shapefile.html#cb23-4" tabindex="-1"></a>  ee<span class="sc">$</span>ImageCollection<span class="sc">$</span><span class="fu">toBands</span>()</span>
<span id="cb23-5"><a href="preparación-de-la-shapefile.html#cb23-5" tabindex="-1"></a><span class="fu">ee_print</span>(tiposuelo)</span>
<span id="cb23-6"><a href="preparación-de-la-shapefile.html#cb23-6" tabindex="-1"></a></span>
<span id="cb23-7"><a href="preparación-de-la-shapefile.html#cb23-7" tabindex="-1"></a>MEX_urbano_cultivo <span class="ot">&lt;-</span> <span class="fu">map</span>(<span class="fu">unique</span>(MEX<span class="sc">$</span>CVEGEO),</span>
<span id="cb23-8"><a href="preparación-de-la-shapefile.html#cb23-8" tabindex="-1"></a>                          <span class="sc">~</span><span class="fu">tryCatch</span>(<span class="fu">ee_extract</span>(</span>
<span id="cb23-9"><a href="preparación-de-la-shapefile.html#cb23-9" tabindex="-1"></a>                            <span class="at">x =</span> tiposuelo,</span>
<span id="cb23-10"><a href="preparación-de-la-shapefile.html#cb23-10" tabindex="-1"></a>                            <span class="at">y =</span> MEX[<span class="fu">c</span>(<span class="st">&quot;ent&quot;</span>,<span class="st">&quot;CVEGEO&quot;</span>)] <span class="sc">%&gt;%</span></span>
<span id="cb23-11"><a href="preparación-de-la-shapefile.html#cb23-11" tabindex="-1"></a>                              <span class="fu">filter</span>(CVEGEO <span class="sc">==</span> .x),</span>
<span id="cb23-12"><a href="preparación-de-la-shapefile.html#cb23-12" tabindex="-1"></a>                            ee<span class="sc">$</span>Reducer<span class="sc">$</span><span class="fu">mean</span>(),</span>
<span id="cb23-13"><a href="preparación-de-la-shapefile.html#cb23-13" tabindex="-1"></a>                            <span class="at">sf =</span> <span class="cn">FALSE</span></span>
<span id="cb23-14"><a href="preparación-de-la-shapefile.html#cb23-14" tabindex="-1"></a>                          ) , </span>
<span id="cb23-15"><a href="preparación-de-la-shapefile.html#cb23-15" tabindex="-1"></a>                          <span class="at">error =</span> <span class="cf">function</span>(e)<span class="fu">data.frame</span>(<span class="at">CVEGEO =</span> .x)) </span>
<span id="cb23-16"><a href="preparación-de-la-shapefile.html#cb23-16" tabindex="-1"></a>)</span>
<span id="cb23-17"><a href="preparación-de-la-shapefile.html#cb23-17" tabindex="-1"></a></span>
<span id="cb23-18"><a href="preparación-de-la-shapefile.html#cb23-18" tabindex="-1"></a></span>
<span id="cb23-19"><a href="preparación-de-la-shapefile.html#cb23-19" tabindex="-1"></a>MEX_urbano_cultivo <span class="sc">%&lt;&gt;%</span> <span class="fu">bind_rows</span>()</span>
<span id="cb23-20"><a href="preparación-de-la-shapefile.html#cb23-20" tabindex="-1"></a></span>
<span id="cb23-21"><a href="preparación-de-la-shapefile.html#cb23-21" tabindex="-1"></a>MEX_urbano_cultivo <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(X2019_crops.coverfraction)) <span class="sc">%&gt;%</span> <span class="fu">select</span>(CVEGEO) </span>
<span id="cb23-22"><a href="preparación-de-la-shapefile.html#cb23-22" tabindex="-1"></a>MEX_urbano_cultivo <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(X2019_urban.coverfraction)) <span class="sc">%&gt;%</span> <span class="fu">select</span>(CVEGEO) </span>
<span id="cb23-23"><a href="preparación-de-la-shapefile.html#cb23-23" tabindex="-1"></a></span>
<span id="cb23-24"><a href="preparación-de-la-shapefile.html#cb23-24" tabindex="-1"></a><span class="fu">saveRDS</span>(MEX_urbano_cultivo, <span class="st">&quot;output/2020/Satelital/MEX_urbano_cultivo.rds&quot;</span>)</span></code></pre></div>
</div>
<div id="distancia-a-hospitales" class="section level3 hasAnchor" number="4.2.8">
<h3><span class="header-section-number">4.2.8</span> Distancia a hospitales<a href="preparación-de-la-shapefile.html#distancia-a-hospitales" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>El código realiza el análisis de la distancia a los hospitales utilizando datos satelitales para el año 2019. Primero, se carga la imagen que representa la accesibilidad a la atención médica, proporcionada por el dataset de Oxford. Luego, se extraen datos de accesibilidad para cada entidad geográfica en México, calculando la media de los valores de accesibilidad para cada área. Se maneja cualquier error potencial durante este proceso, garantizando que, en caso de problemas, se registre la entidad correspondiente sin datos. Posteriormente, los resultados se combinan en un solo dataframe y se revisa si hay valores faltantes en las medidas de accesibilidad. Finalmente, el dataframe con los datos de accesibilidad se guarda en un archivo RDS para su análisis posterior.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="preparación-de-la-shapefile.html#cb24-1" tabindex="-1"></a>dist_salud <span class="ot">=</span> ee<span class="sc">$</span><span class="fu">Image</span>(<span class="st">&#39;Oxford/MAP/accessibility_to_healthcare_2019&#39;</span>) </span>
<span id="cb24-2"><a href="preparación-de-la-shapefile.html#cb24-2" tabindex="-1"></a><span class="fu">ee_print</span>(dist_salud)</span>
<span id="cb24-3"><a href="preparación-de-la-shapefile.html#cb24-3" tabindex="-1"></a></span>
<span id="cb24-4"><a href="preparación-de-la-shapefile.html#cb24-4" tabindex="-1"></a></span>
<span id="cb24-5"><a href="preparación-de-la-shapefile.html#cb24-5" tabindex="-1"></a>MEX_dist_salud <span class="ot">&lt;-</span> <span class="fu">map</span>(<span class="fu">unique</span>(MEX<span class="sc">$</span>CVEGEO),</span>
<span id="cb24-6"><a href="preparación-de-la-shapefile.html#cb24-6" tabindex="-1"></a>                          <span class="sc">~</span><span class="fu">tryCatch</span>(<span class="fu">ee_extract</span>(</span>
<span id="cb24-7"><a href="preparación-de-la-shapefile.html#cb24-7" tabindex="-1"></a>                            <span class="at">x =</span> dist_salud,</span>
<span id="cb24-8"><a href="preparación-de-la-shapefile.html#cb24-8" tabindex="-1"></a>                            <span class="at">y =</span> MEX[<span class="fu">c</span>(<span class="st">&quot;ent&quot;</span>,<span class="st">&quot;CVEGEO&quot;</span>)] <span class="sc">%&gt;%</span></span>
<span id="cb24-9"><a href="preparación-de-la-shapefile.html#cb24-9" tabindex="-1"></a>                              <span class="fu">filter</span>(CVEGEO <span class="sc">==</span> .x),</span>
<span id="cb24-10"><a href="preparación-de-la-shapefile.html#cb24-10" tabindex="-1"></a>                            ee<span class="sc">$</span>Reducer<span class="sc">$</span><span class="fu">mean</span>(),</span>
<span id="cb24-11"><a href="preparación-de-la-shapefile.html#cb24-11" tabindex="-1"></a>                            <span class="at">sf =</span> <span class="cn">FALSE</span></span>
<span id="cb24-12"><a href="preparación-de-la-shapefile.html#cb24-12" tabindex="-1"></a>                          ) , </span>
<span id="cb24-13"><a href="preparación-de-la-shapefile.html#cb24-13" tabindex="-1"></a>                          <span class="at">error =</span> <span class="cf">function</span>(e)<span class="fu">data.frame</span>(<span class="at">CVEGEO =</span> .x)) </span>
<span id="cb24-14"><a href="preparación-de-la-shapefile.html#cb24-14" tabindex="-1"></a>)</span>
<span id="cb24-15"><a href="preparación-de-la-shapefile.html#cb24-15" tabindex="-1"></a></span>
<span id="cb24-16"><a href="preparación-de-la-shapefile.html#cb24-16" tabindex="-1"></a></span>
<span id="cb24-17"><a href="preparación-de-la-shapefile.html#cb24-17" tabindex="-1"></a>MEX_dist_salud <span class="sc">%&lt;&gt;%</span> <span class="fu">bind_rows</span>()</span>
<span id="cb24-18"><a href="preparación-de-la-shapefile.html#cb24-18" tabindex="-1"></a></span>
<span id="cb24-19"><a href="preparación-de-la-shapefile.html#cb24-19" tabindex="-1"></a>MEX_dist_salud <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(accessibility )) <span class="sc">%&gt;%</span> <span class="fu">select</span>(CVEGEO) </span>
<span id="cb24-20"><a href="preparación-de-la-shapefile.html#cb24-20" tabindex="-1"></a>MEX_dist_salud <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(accessibility_walking_only)) <span class="sc">%&gt;%</span> <span class="fu">select</span>(CVEGEO) </span>
<span id="cb24-21"><a href="preparación-de-la-shapefile.html#cb24-21" tabindex="-1"></a></span>
<span id="cb24-22"><a href="preparación-de-la-shapefile.html#cb24-22" tabindex="-1"></a><span class="fu">saveRDS</span>(MEX_dist_salud, <span class="st">&quot;output/2020/Satelital/MEX_dist_salud.rds&quot;</span>)</span></code></pre></div>
</div>
<div id="global-human-modification-ghm" class="section level3 hasAnchor" number="4.2.9">
<h3><span class="header-section-number">4.2.9</span> Global Human Modification (GHM)<a href="preparación-de-la-shapefile.html#global-human-modification-ghm" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>El código realiza el análisis de la modificación humana global (gHM) utilizando datos de satélites para el año 2016. Primero, se carga la colección de imágenes correspondiente al índice de Modificación Humana Global, que proporciona información sobre la alteración del entorno por actividades humanas. Luego, se extraen estos datos para cada entidad geográfica en México, calculando la media de los valores para cada área. Se maneja cualquier error que pueda surgir durante la extracción de datos, asegurando que, en caso de problemas, se registre la entidad sin datos. Después de combinar los resultados en un solo dataframe, se revisa si hay valores faltantes en el índice de modificación humana. Finalmente, se guarda el dataframe con los datos de modificación humana en un archivo RDS para su análisis futuro.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="preparación-de-la-shapefile.html#cb25-1" tabindex="-1"></a>CSP_gHM <span class="ot">=</span> ee<span class="sc">$</span><span class="fu">ImageCollection</span>(<span class="st">&#39;CSP/HM/GlobalHumanModification&#39;</span>) </span>
<span id="cb25-2"><a href="preparación-de-la-shapefile.html#cb25-2" tabindex="-1"></a><span class="fu">ee_print</span>(CSP_gHM)</span>
<span id="cb25-3"><a href="preparación-de-la-shapefile.html#cb25-3" tabindex="-1"></a></span>
<span id="cb25-4"><a href="preparación-de-la-shapefile.html#cb25-4" tabindex="-1"></a>MEX_GHM <span class="ot">&lt;-</span> <span class="fu">map</span>(<span class="fu">unique</span>(MEX<span class="sc">$</span>CVEGEO),</span>
<span id="cb25-5"><a href="preparación-de-la-shapefile.html#cb25-5" tabindex="-1"></a>                      <span class="sc">~</span><span class="fu">tryCatch</span>(<span class="fu">ee_extract</span>(</span>
<span id="cb25-6"><a href="preparación-de-la-shapefile.html#cb25-6" tabindex="-1"></a>                        <span class="at">x =</span> CSP_gHM,</span>
<span id="cb25-7"><a href="preparación-de-la-shapefile.html#cb25-7" tabindex="-1"></a>                        <span class="at">y =</span> MEX[<span class="fu">c</span>(<span class="st">&quot;ent&quot;</span>,<span class="st">&quot;CVEGEO&quot;</span>)] <span class="sc">%&gt;%</span></span>
<span id="cb25-8"><a href="preparación-de-la-shapefile.html#cb25-8" tabindex="-1"></a>                          <span class="fu">filter</span>(CVEGEO <span class="sc">==</span> .x),</span>
<span id="cb25-9"><a href="preparación-de-la-shapefile.html#cb25-9" tabindex="-1"></a>                        ee<span class="sc">$</span>Reducer<span class="sc">$</span><span class="fu">mean</span>(),</span>
<span id="cb25-10"><a href="preparación-de-la-shapefile.html#cb25-10" tabindex="-1"></a>                        <span class="at">sf =</span> <span class="cn">FALSE</span></span>
<span id="cb25-11"><a href="preparación-de-la-shapefile.html#cb25-11" tabindex="-1"></a>                      ) , </span>
<span id="cb25-12"><a href="preparación-de-la-shapefile.html#cb25-12" tabindex="-1"></a>                      <span class="at">error =</span> <span class="cf">function</span>(e)<span class="fu">data.frame</span>(<span class="at">CVEGEO =</span> .x)) </span>
<span id="cb25-13"><a href="preparación-de-la-shapefile.html#cb25-13" tabindex="-1"></a>)</span>
<span id="cb25-14"><a href="preparación-de-la-shapefile.html#cb25-14" tabindex="-1"></a></span>
<span id="cb25-15"><a href="preparación-de-la-shapefile.html#cb25-15" tabindex="-1"></a></span>
<span id="cb25-16"><a href="preparación-de-la-shapefile.html#cb25-16" tabindex="-1"></a>MEX_GHM <span class="sc">%&lt;&gt;%</span> <span class="fu">bind_rows</span>()</span>
<span id="cb25-17"><a href="preparación-de-la-shapefile.html#cb25-17" tabindex="-1"></a></span>
<span id="cb25-18"><a href="preparación-de-la-shapefile.html#cb25-18" tabindex="-1"></a>MEX_GHM <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(X2016_gHM )) <span class="sc">%&gt;%</span> <span class="fu">select</span>(CVEGEO) </span>
<span id="cb25-19"><a href="preparación-de-la-shapefile.html#cb25-19" tabindex="-1"></a></span>
<span id="cb25-20"><a href="preparación-de-la-shapefile.html#cb25-20" tabindex="-1"></a><span class="fu">saveRDS</span>(MEX_GHM, <span class="st">&quot;output/2020/Satelital/MEX_GHM.rds&quot;</span>)</span></code></pre></div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="configurar-el-entorno-de-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="conslidar-y-guardar-las-variables-satelitales.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/psirusteam/2023MEXsae/01_Descarga_satelitales.qmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Fortalecimiento de capacidades en Técnicas de Estimación en Áreas Pequeñas con enfoque Bayesiano para la desagregación de datos.pdf", "Fortalecimiento de capacidades en Técnicas de Estimación en Áreas Pequeñas con enfoque Bayesiano para la desagregación de datos.epub", "Fortalecimiento de capacidades en Técnicas de Estimación en Áreas Pequeñas con enfoque Bayesiano para la desagregación de datos.mobi"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
},
"tconfig": null
});
});
</script>

</body>

</html>
