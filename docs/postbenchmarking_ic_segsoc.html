<!DOCTYPE html>
<html lang="es" xml:lang="es">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>11_PostBenchmarking_ic_segsoc.r | Manual de procesamiento del indicador de pobreza multidimensional mediante el uso de estimación de áreas pequeñas para México 2020</title>
  <meta name="description" content="Manual de procesamiento." />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="11_PostBenchmarking_ic_segsoc.r | Manual de procesamiento del indicador de pobreza multidimensional mediante el uso de estimación de áreas pequeñas para México 2020" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Manual de procesamiento." />
  <meta name="github-repo" content="psirusteam/coneval" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="11_PostBenchmarking_ic_segsoc.r | Manual de procesamiento del indicador de pobreza multidimensional mediante el uso de estimación de áreas pequeñas para México 2020" />
  
  <meta name="twitter:description" content="Manual de procesamiento." />
  

<meta name="author" content="Andrés Gutiérrez, Stalyn Guerrero" />


<meta name="date" content="2024-07-30" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="postbenchmarking_ic_ali_nc.html"/>
<link rel="next" href="imputacion_censal.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Manual de procesamiento.</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introducción</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#respositodio-de-códigos"><i class="fa fa-check"></i>Respositodio de códigos</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#estructura-del-proyecto"><i class="fa fa-check"></i>Estructura del Proyecto</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#librerias-de-r-y-otros-insumos"><i class="fa fa-check"></i>Librerias de <em>R</em> y otros insumos</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#bases-de-datos-utilizadas"><i class="fa fa-check"></i>Bases de Datos Utilizadas</a></li>
<li class="chapter" data-level="" data-path="indicadores-estimados.html"><a href="indicadores-estimados.html"><i class="fa fa-check"></i>Indicadores estimados</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="union_bases.html"><a href="union_bases.html"><i class="fa fa-check"></i>00_union_bases.R</a></li>
<li class="chapter" data-level="" data-path="descarga_satelitales.html"><a href="descarga_satelitales.html"><i class="fa fa-check"></i>01_Descarga_satelitales.R</a></li>
<li class="chapter" data-level="" data-path="union_predictores.html"><a href="union_predictores.html"><i class="fa fa-check"></i>02_Union_predictores.R</a>
<ul>
<li class="chapter" data-level="0.0.1" data-path="union_predictores.html"><a href="union_predictores.html#configuración-inicial-y-carga-de-librerías"><i class="fa fa-check"></i><b>0.0.1</b> Configuración Inicial y Carga de Librerías</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="estandarizar_muestra_cuestionario_ampliado.html"><a href="estandarizar_muestra_cuestionario_ampliado.html"><i class="fa fa-check"></i>03_Estandarizar_muestra_cuestionario_ampliado.R</a>
<ul>
<li class="chapter" data-level="" data-path="estandarizar_muestra_cuestionario_ampliado.html"><a href="estandarizar_muestra_cuestionario_ampliado.html#resumen-y-guardado-de-datos-agrupados"><i class="fa fa-check"></i>Resumen y Guardado de Datos Agrupados</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="armonizar_encuesta.html"><a href="armonizar_encuesta.html"><i class="fa fa-check"></i>04_Armonizar_encuesta.R</a></li>
<li class="chapter" data-level="" data-path="validacion_encuestas.html"><a href="validacion_encuestas.html"><i class="fa fa-check"></i>05_Validacion_encuestas.R</a></li>
<li class="chapter" data-level="" data-path="modelo_unidad_ictpc.html"><a href="modelo_unidad_ictpc.html"><i class="fa fa-check"></i>06_Modelo_unidad_ictpc.R</a></li>
<li class="chapter" data-level="" data-path="modelo_unidad_py_ic_ali_nc.html"><a href="modelo_unidad_py_ic_ali_nc.html"><i class="fa fa-check"></i>07_Modelo_unidad_py_ic_ali_nc.R</a></li>
<li class="chapter" data-level="" data-path="modelo_unidad_py_ic_segsoc.html"><a href="modelo_unidad_py_ic_segsoc.html"><i class="fa fa-check"></i>08_Modelo_unidad_py_ic_segsoc</a></li>
<li class="chapter" data-level="" data-path="postbenchmarking_ictpc.html"><a href="postbenchmarking_ictpc.html"><i class="fa fa-check"></i>09_PostBenchmarking_ictpc.R</a></li>
<li class="chapter" data-level="" data-path="postbenchmarking_ic_ali_nc.html"><a href="postbenchmarking_ic_ali_nc.html"><i class="fa fa-check"></i>10_PostBenchmarking_ic_ali_nc.R</a></li>
<li class="chapter" data-level="" data-path="postbenchmarking_ic_segsoc.html"><a href="postbenchmarking_ic_segsoc.html"><i class="fa fa-check"></i>11_PostBenchmarking_ic_segsoc.r</a></li>
<li class="chapter" data-level="" data-path="imputacion_censal.html"><a href="imputacion_censal.html"><i class="fa fa-check"></i>12_Imputacion_censal.R</a></li>
<li class="chapter" data-level="" data-path="estimacion_ent_02.html"><a href="estimacion_ent_02.html"><i class="fa fa-check"></i>13_Estimacion_ent_02.R</a></li>
<li class="chapter" data-level="" data-path="estimacion_municipios_ipm_pobreza.html"><a href="estimacion_municipios_ipm_pobreza.html"><i class="fa fa-check"></i>14_estimacion_municipios_ipm_pobreza.R</a></li>
<li class="chapter" data-level="" data-path="estimacion_municipios_ipm_pobreza_error.html"><a href="estimacion_municipios_ipm_pobreza_error.html"><i class="fa fa-check"></i>15_estimacion_municipios_ipm_pobreza_error.R</a></li>
<li class="chapter" data-level="" data-path="mapas.html"><a href="mapas.html"><i class="fa fa-check"></i>16_Mapas.R</a></li>
<li class="chapter" data-level="" data-path="estimacion_municipios_carencias.html"><a href="estimacion_municipios_carencias.html"><i class="fa fa-check"></i>17_estimacion_municipios_carencias.R</a></li>
<li class="chapter" data-level="" data-path="estimacion_municipios_carencias_error.html"><a href="estimacion_municipios_carencias_error.html"><i class="fa fa-check"></i>18_estimacion_municipios_carencias_error.R</a></li>
<li class="chapter" data-level="" data-path="mapas_carencias.html"><a href="mapas_carencias.html"><i class="fa fa-check"></i>19_Mapas_carencias.R</a></li>
<li class="chapter" data-level="" data-path="estimacion_directa_carencias.html"><a href="estimacion_directa_carencias.html"><i class="fa fa-check"></i>20_estimacion_directa_carencias.R</a></li>
<li class="divider"></li>
<li><a Manual de procesamiento. </a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Manual de procesamiento del indicador de pobreza multidimensional mediante el uso de estimación de áreas pequeñas para México 2020</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="postbenchmarking_ic_segsoc.r" class="section level1 unnumbered hasAnchor">
<h1>11_PostBenchmarking_ic_segsoc.r<a href="postbenchmarking_ic_segsoc.html#postbenchmarking_ic_segsoc.r" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Para la ejecución del presente análisis, se debe abrir el archivo <strong>11_PostBenchmarking_ic_segsoc.R</strong> disponible en la ruta <em>Rcodes/2020/11_PostBenchmarking_ic_segsoc.R</em>.</p>
<p>Este script en R se centra en el proceso de benchmarking y validación de un modelo multinivel previamente ajustado para lala carencia en por cobertura de seguridad social. Inicia con la limpieza del entorno de trabajo y la carga de librerías esenciales como <code>scales</code>, <code>patchwork</code>, <code>srvyr</code>, <code>survey</code>, <code>haven</code>, <code>sampling</code> y <code>tidyverse</code>. Luego, se cargan funciones adicionales desde archivos externos para la validación y el benchmarking del modelo.</p>
<p>El modelo ajustado se lee desde un archivo RDS (<code>fit_mrp_ic_segsoc.rds</code>) y se procede a la etapa de benchmarking utilizando la función benchmarking, aplicando el método logit sobre un conjunto de covariables específicas (<code>ent</code>, <code>area</code>, <code>sexo</code>, <code>edad</code>, <code>discapacidad</code>, <code>hlengua</code>). Los resultados del benchmarking se incorporan al dataframe de post-estratificación y se recalculan las predicciones ponderadas.</p>
<p>El script también realiza validaciones a nivel nacional y por subgrupos (<code>ent</code>, <code>area</code>, <code>sexo</code>, <code>edad</code>, <code>discapacidad</code>, <code>hlengua</code>, <code>nivel_edu</code>). Para cada subgrupo, se generan gráficos de validación univariada utilizando la función plot_uni_validacion, que compara las estimaciones directas y ajustadas del modelo. Los gráficos resultantes se combinan y se guardan en un archivo JPG, proporcionando una visualización completa del desempeño del modelo. Finalmente, tanto los gráficos de subgrupos como el dataframe de post-estratificación se guardan en archivos RDS para futuros análisis y referencia.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="postbenchmarking_ic_segsoc.html#cb77-1" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span><span class="fu">ls</span>())</span>
<span id="cb77-2"><a href="postbenchmarking_ic_segsoc.html#cb77-2" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;</span><span class="sc">\f</span><span class="st">&quot;</span>)</span>
<span id="cb77-3"><a href="postbenchmarking_ic_segsoc.html#cb77-3" tabindex="-1"></a><span class="do">###############################################################</span></span>
<span id="cb77-4"><a href="postbenchmarking_ic_segsoc.html#cb77-4" tabindex="-1"></a><span class="co"># Loading required libraries ----------------------------------</span></span>
<span id="cb77-5"><a href="postbenchmarking_ic_segsoc.html#cb77-5" tabindex="-1"></a><span class="do">###############################################################</span></span>
<span id="cb77-6"><a href="postbenchmarking_ic_segsoc.html#cb77-6" tabindex="-1"></a></span>
<span id="cb77-7"><a href="postbenchmarking_ic_segsoc.html#cb77-7" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb77-8"><a href="postbenchmarking_ic_segsoc.html#cb77-8" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb77-9"><a href="postbenchmarking_ic_segsoc.html#cb77-9" tabindex="-1"></a><span class="fu">library</span>(srvyr)</span>
<span id="cb77-10"><a href="postbenchmarking_ic_segsoc.html#cb77-10" tabindex="-1"></a><span class="fu">library</span>(survey)</span>
<span id="cb77-11"><a href="postbenchmarking_ic_segsoc.html#cb77-11" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb77-12"><a href="postbenchmarking_ic_segsoc.html#cb77-12" tabindex="-1"></a><span class="fu">library</span>(sampling)</span>
<span id="cb77-13"><a href="postbenchmarking_ic_segsoc.html#cb77-13" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb77-14"><a href="postbenchmarking_ic_segsoc.html#cb77-14" tabindex="-1"></a></span>
<span id="cb77-15"><a href="postbenchmarking_ic_segsoc.html#cb77-15" tabindex="-1"></a><span class="do">###############################################################</span></span>
<span id="cb77-16"><a href="postbenchmarking_ic_segsoc.html#cb77-16" tabindex="-1"></a><span class="co"># Lectura de funciones </span></span>
<span id="cb77-17"><a href="postbenchmarking_ic_segsoc.html#cb77-17" tabindex="-1"></a><span class="do">###############################################################</span></span>
<span id="cb77-18"><a href="postbenchmarking_ic_segsoc.html#cb77-18" tabindex="-1"></a></span>
<span id="cb77-19"><a href="postbenchmarking_ic_segsoc.html#cb77-19" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;../source/Plot_validacion_bench.R&quot;</span>, <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>)</span>
<span id="cb77-20"><a href="postbenchmarking_ic_segsoc.html#cb77-20" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;../source/Benchmarking.R&quot;</span>, <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>)</span>
<span id="cb77-21"><a href="postbenchmarking_ic_segsoc.html#cb77-21" tabindex="-1"></a></span>
<span id="cb77-22"><a href="postbenchmarking_ic_segsoc.html#cb77-22" tabindex="-1"></a><span class="do">###############################################################</span></span>
<span id="cb77-23"><a href="postbenchmarking_ic_segsoc.html#cb77-23" tabindex="-1"></a><span class="co"># Lectura del modelo </span></span>
<span id="cb77-24"><a href="postbenchmarking_ic_segsoc.html#cb77-24" tabindex="-1"></a><span class="do">###############################################################</span></span>
<span id="cb77-25"><a href="postbenchmarking_ic_segsoc.html#cb77-25" tabindex="-1"></a></span>
<span id="cb77-26"><a href="postbenchmarking_ic_segsoc.html#cb77-26" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;../output/2020/modelos/fit_mrp_ic_segsoc.rds&quot;</span>)</span></code></pre></div>
<div id="proceso-de-benchmarking-2" class="section level4 unnumbered hasAnchor">
<h4>proceso de benchmarking<a href="postbenchmarking_ic_segsoc.html#proceso-de-benchmarking-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="postbenchmarking_ic_segsoc.html#cb78-1" tabindex="-1"></a>list_bench <span class="ot">&lt;-</span> <span class="fu">benchmarking</span>(<span class="at">modelo =</span> fit,</span>
<span id="cb78-2"><a href="postbenchmarking_ic_segsoc.html#cb78-2" tabindex="-1"></a>             <span class="at">names_cov =</span>   <span class="fu">c</span>(<span class="st">&quot;ent&quot;</span>,</span>
<span id="cb78-3"><a href="postbenchmarking_ic_segsoc.html#cb78-3" tabindex="-1"></a>                             <span class="st">&quot;area&quot;</span>,</span>
<span id="cb78-4"><a href="postbenchmarking_ic_segsoc.html#cb78-4" tabindex="-1"></a>                             <span class="st">&quot;sexo&quot;</span>,</span>
<span id="cb78-5"><a href="postbenchmarking_ic_segsoc.html#cb78-5" tabindex="-1"></a>                             <span class="st">&quot;edad&quot;</span>,</span>
<span id="cb78-6"><a href="postbenchmarking_ic_segsoc.html#cb78-6" tabindex="-1"></a>                             <span class="st">&quot;discapacidad&quot;</span>,</span>
<span id="cb78-7"><a href="postbenchmarking_ic_segsoc.html#cb78-7" tabindex="-1"></a>                             <span class="st">&quot;hlengua&quot;</span>),                      </span>
<span id="cb78-8"><a href="postbenchmarking_ic_segsoc.html#cb78-8" tabindex="-1"></a>             <span class="at">metodo =</span> <span class="st">&quot;logit&quot;</span>)</span></code></pre></div>
</div>
<div id="validaciones-y-plot-uni-2" class="section level4 unnumbered hasAnchor">
<h4>Validaciones y plot uni<a href="postbenchmarking_ic_segsoc.html#validaciones-y-plot-uni-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="postbenchmarking_ic_segsoc.html#cb79-1" tabindex="-1"></a>poststrat_df <span class="ot">&lt;-</span> fit<span class="sc">$</span>poststrat_df <span class="sc">%&gt;%</span> <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span>  </span>
<span id="cb79-2"><a href="postbenchmarking_ic_segsoc.html#cb79-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">yk_stan_lmer =</span> yk,</span>
<span id="cb79-3"><a href="postbenchmarking_ic_segsoc.html#cb79-3" tabindex="-1"></a>         <span class="at">gk_bench =</span> list_bench<span class="sc">$</span>gk_bench,</span>
<span id="cb79-4"><a href="postbenchmarking_ic_segsoc.html#cb79-4" tabindex="-1"></a>         <span class="at">yk_bench =</span> yk <span class="sc">*</span> gk_bench )</span>
<span id="cb79-5"><a href="postbenchmarking_ic_segsoc.html#cb79-5" tabindex="-1"></a></span>
<span id="cb79-6"><a href="postbenchmarking_ic_segsoc.html#cb79-6" tabindex="-1"></a>diseno_encuesta <span class="ot">&lt;-</span> fit<span class="sc">$</span>encuesta_mrp <span class="sc">%&gt;%</span> </span>
<span id="cb79-7"><a href="postbenchmarking_ic_segsoc.html#cb79-7" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">yk_dir =</span> yk) <span class="sc">%&gt;%</span> </span>
<span id="cb79-8"><a href="postbenchmarking_ic_segsoc.html#cb79-8" tabindex="-1"></a>  <span class="fu">as_survey_design</span>(<span class="at">weights =</span> fep)</span>
<span id="cb79-9"><a href="postbenchmarking_ic_segsoc.html#cb79-9" tabindex="-1"></a></span>
<span id="cb79-10"><a href="postbenchmarking_ic_segsoc.html#cb79-10" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">predict</span>(fit<span class="sc">$</span>fit_mrp,<span class="at">type =</span> <span class="st">&quot;response&quot;</span>))</span>
<span id="cb79-11"><a href="postbenchmarking_ic_segsoc.html#cb79-11" tabindex="-1"></a><span class="fu">mean</span>(diseno_encuesta<span class="sc">$</span>variables<span class="sc">$</span>yk)</span>
<span id="cb79-12"><a href="postbenchmarking_ic_segsoc.html#cb79-12" tabindex="-1"></a></span>
<span id="cb79-13"><a href="postbenchmarking_ic_segsoc.html#cb79-13" tabindex="-1"></a><span class="do">## validación nacional.</span></span>
<span id="cb79-14"><a href="postbenchmarking_ic_segsoc.html#cb79-14" tabindex="-1"></a><span class="fu">cbind</span>(</span>
<span id="cb79-15"><a href="postbenchmarking_ic_segsoc.html#cb79-15" tabindex="-1"></a>  diseno_encuesta <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">Nacional_dir =</span> <span class="fu">survey_mean</span>(yk_dir)) <span class="sc">%&gt;%</span> </span>
<span id="cb79-16"><a href="postbenchmarking_ic_segsoc.html#cb79-16" tabindex="-1"></a>    <span class="fu">select</span>(Nacional_dir),</span>
<span id="cb79-17"><a href="postbenchmarking_ic_segsoc.html#cb79-17" tabindex="-1"></a>  poststrat_df <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(</span>
<span id="cb79-18"><a href="postbenchmarking_ic_segsoc.html#cb79-18" tabindex="-1"></a>    <span class="at">Nacional_stan_lmer =</span> <span class="fu">sum</span>(n <span class="sc">*</span> yk_stan_lmer) <span class="sc">/</span> <span class="fu">sum</span>(n),</span>
<span id="cb79-19"><a href="postbenchmarking_ic_segsoc.html#cb79-19" tabindex="-1"></a>    <span class="at">Nacional_bench =</span> <span class="fu">sum</span>(n <span class="sc">*</span> yk_bench) <span class="sc">/</span> <span class="fu">sum</span>(n<span class="sc">*</span>gk_bench),</span>
<span id="cb79-20"><a href="postbenchmarking_ic_segsoc.html#cb79-20" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span> <span class="fu">print</span>()</span></code></pre></div>
</div>
<div id="validaciones-por-subgrupo-completo-2" class="section level4 unnumbered hasAnchor">
<h4>Validaciones por subgrupo completo<a href="postbenchmarking_ic_segsoc.html#validaciones-por-subgrupo-completo-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="postbenchmarking_ic_segsoc.html#cb80-1" tabindex="-1"></a>subgrupo <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;ent&quot;</span>,</span>
<span id="cb80-2"><a href="postbenchmarking_ic_segsoc.html#cb80-2" tabindex="-1"></a>              <span class="st">&quot;area&quot;</span>,</span>
<span id="cb80-3"><a href="postbenchmarking_ic_segsoc.html#cb80-3" tabindex="-1"></a>              <span class="st">&quot;sexo&quot;</span>,</span>
<span id="cb80-4"><a href="postbenchmarking_ic_segsoc.html#cb80-4" tabindex="-1"></a>              <span class="st">&quot;edad&quot;</span>,</span>
<span id="cb80-5"><a href="postbenchmarking_ic_segsoc.html#cb80-5" tabindex="-1"></a>              <span class="st">&quot;discapacidad&quot;</span>,</span>
<span id="cb80-6"><a href="postbenchmarking_ic_segsoc.html#cb80-6" tabindex="-1"></a>              <span class="st">&quot;hlengua&quot;</span>,<span class="st">&quot;nivel_edu&quot;</span>)</span>
<span id="cb80-7"><a href="postbenchmarking_ic_segsoc.html#cb80-7" tabindex="-1"></a></span>
<span id="cb80-8"><a href="postbenchmarking_ic_segsoc.html#cb80-8" tabindex="-1"></a></span>
<span id="cb80-9"><a href="postbenchmarking_ic_segsoc.html#cb80-9" tabindex="-1"></a>plot_subgrupo <span class="ot">&lt;-</span> <span class="fu">map</span>(</span>
<span id="cb80-10"><a href="postbenchmarking_ic_segsoc.html#cb80-10" tabindex="-1"></a>  <span class="at">.x =</span> <span class="fu">setNames</span>(subgrupo, subgrupo),</span>
<span id="cb80-11"><a href="postbenchmarking_ic_segsoc.html#cb80-11" tabindex="-1"></a>  <span class="sc">~</span> <span class="fu">plot_uni_validacion</span>(</span>
<span id="cb80-12"><a href="postbenchmarking_ic_segsoc.html#cb80-12" tabindex="-1"></a>    <span class="at">sample_diseno =</span> diseno_encuesta,</span>
<span id="cb80-13"><a href="postbenchmarking_ic_segsoc.html#cb80-13" tabindex="-1"></a>    <span class="at">poststrat =</span> poststrat_df,</span>
<span id="cb80-14"><a href="postbenchmarking_ic_segsoc.html#cb80-14" tabindex="-1"></a>    <span class="at">by1 =</span> .x</span>
<span id="cb80-15"><a href="postbenchmarking_ic_segsoc.html#cb80-15" tabindex="-1"></a>  )</span>
<span id="cb80-16"><a href="postbenchmarking_ic_segsoc.html#cb80-16" tabindex="-1"></a>)</span>
<span id="cb80-17"><a href="postbenchmarking_ic_segsoc.html#cb80-17" tabindex="-1"></a></span>
<span id="cb80-18"><a href="postbenchmarking_ic_segsoc.html#cb80-18" tabindex="-1"></a></span>
<span id="cb80-19"><a href="postbenchmarking_ic_segsoc.html#cb80-19" tabindex="-1"></a>plot_subgrupo<span class="sc">$</span>sexo<span class="sc">$</span>tabla <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(n_sample) ) <span class="sc">%&gt;%</span></span>
<span id="cb80-20"><a href="postbenchmarking_ic_segsoc.html#cb80-20" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ER =</span> <span class="fu">abs</span>((directo <span class="sc">-</span> stan_lmer)<span class="sc">/</span>directo )<span class="sc">*</span><span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb80-21"><a href="postbenchmarking_ic_segsoc.html#cb80-21" tabindex="-1"></a>  <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span> <span class="fu">select</span>(sexo<span class="sc">:</span>directo_upp,stan_lmer, ER)</span>
<span id="cb80-22"><a href="postbenchmarking_ic_segsoc.html#cb80-22" tabindex="-1"></a></span>
<span id="cb80-23"><a href="postbenchmarking_ic_segsoc.html#cb80-23" tabindex="-1"></a>plot_subgrupo<span class="sc">$</span>ent<span class="sc">$</span>gg_plot</span>
<span id="cb80-24"><a href="postbenchmarking_ic_segsoc.html#cb80-24" tabindex="-1"></a></span>
<span id="cb80-25"><a href="postbenchmarking_ic_segsoc.html#cb80-25" tabindex="-1"></a>plot_subgrupo<span class="sc">$</span>sexo<span class="sc">$</span>gg_plot <span class="sc">+</span> plot_subgrupo<span class="sc">$</span>nivel_edu<span class="sc">$</span>gg_plot <span class="sc">+</span></span>
<span id="cb80-26"><a href="postbenchmarking_ic_segsoc.html#cb80-26" tabindex="-1"></a>  plot_subgrupo<span class="sc">$</span>edad<span class="sc">$</span>gg_plot <span class="sc">+</span> plot_subgrupo<span class="sc">$</span>hlengua<span class="sc">$</span>gg_plot <span class="sc">+</span></span>
<span id="cb80-27"><a href="postbenchmarking_ic_segsoc.html#cb80-27" tabindex="-1"></a>  plot_subgrupo<span class="sc">$</span>area<span class="sc">$</span>gg_plot <span class="sc">+</span> plot_subgrupo<span class="sc">$</span>discapacidad<span class="sc">$</span>gg_plot  </span>
<span id="cb80-28"><a href="postbenchmarking_ic_segsoc.html#cb80-28" tabindex="-1"></a></span>
<span id="cb80-29"><a href="postbenchmarking_ic_segsoc.html#cb80-29" tabindex="-1"></a>plot_uni <span class="ot">&lt;-</span> plot_subgrupo<span class="sc">$</span>ent<span class="sc">$</span>gg_plot  <span class="sc">/</span></span>
<span id="cb80-30"><a href="postbenchmarking_ic_segsoc.html#cb80-30" tabindex="-1"></a>  (</span>
<span id="cb80-31"><a href="postbenchmarking_ic_segsoc.html#cb80-31" tabindex="-1"></a>    plot_subgrupo<span class="sc">$</span>sexo<span class="sc">$</span>gg_plot <span class="sc">+</span> plot_subgrupo<span class="sc">$</span>nivel_edu<span class="sc">$</span>gg_plot <span class="sc">+</span></span>
<span id="cb80-32"><a href="postbenchmarking_ic_segsoc.html#cb80-32" tabindex="-1"></a>      plot_subgrupo<span class="sc">$</span>edad<span class="sc">$</span>gg_plot <span class="sc">+</span> plot_subgrupo<span class="sc">$</span>hlengua<span class="sc">$</span>gg_plot <span class="sc">+</span></span>
<span id="cb80-33"><a href="postbenchmarking_ic_segsoc.html#cb80-33" tabindex="-1"></a>      plot_subgrupo<span class="sc">$</span>area<span class="sc">$</span>gg_plot <span class="sc">+</span> plot_subgrupo<span class="sc">$</span>discapacidad<span class="sc">$</span>gg_plot</span>
<span id="cb80-34"><a href="postbenchmarking_ic_segsoc.html#cb80-34" tabindex="-1"></a>  )</span>
<span id="cb80-35"><a href="postbenchmarking_ic_segsoc.html#cb80-35" tabindex="-1"></a></span>
<span id="cb80-36"><a href="postbenchmarking_ic_segsoc.html#cb80-36" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">plot =</span> plot_uni,</span>
<span id="cb80-37"><a href="postbenchmarking_ic_segsoc.html#cb80-37" tabindex="-1"></a>       <span class="at">filename =</span> <span class="st">&quot;../output/2020/modelos/plot_uni_ic_segsoc.jpg&quot;</span>,</span>
<span id="cb80-38"><a href="postbenchmarking_ic_segsoc.html#cb80-38" tabindex="-1"></a>       <span class="at">scale =</span> <span class="dv">3</span>)</span>
<span id="cb80-39"><a href="postbenchmarking_ic_segsoc.html#cb80-39" tabindex="-1"></a></span>
<span id="cb80-40"><a href="postbenchmarking_ic_segsoc.html#cb80-40" tabindex="-1"></a><span class="fu">saveRDS</span>(<span class="at">object =</span>  plot_subgrupo,</span>
<span id="cb80-41"><a href="postbenchmarking_ic_segsoc.html#cb80-41" tabindex="-1"></a>        <span class="at">file =</span> <span class="st">&quot;../output/2020/modelos/plot_uni_ic_segsoc.rds&quot;</span>)</span>
<span id="cb80-42"><a href="postbenchmarking_ic_segsoc.html#cb80-42" tabindex="-1"></a></span>
<span id="cb80-43"><a href="postbenchmarking_ic_segsoc.html#cb80-43" tabindex="-1"></a><span class="fu">saveRDS</span>(<span class="at">object =</span>  poststrat_df,</span>
<span id="cb80-44"><a href="postbenchmarking_ic_segsoc.html#cb80-44" tabindex="-1"></a>        <span class="at">file =</span> <span class="st">&quot;../input/2020/muestra_ampliada/poststrat_df_ic_segsoc.rds&quot;</span>)</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="postbenchmarking_ic_ali_nc.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="imputacion_censal.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/psirusteam/2023MEXsae/11_PostBenchmarking_ic_segsoc.qmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Manual de procesamiento del indicador de pobreza multidimensional mediante el uso de estimación de áreas pequeñas para México 2020.pdf", "Manual de procesamiento del indicador de pobreza multidimensional mediante el uso de estimación de áreas pequeñas para México 2020.epub", "Manual de procesamiento del indicador de pobreza multidimensional mediante el uso de estimación de áreas pequeñas para México 2020.mobi"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
},
"tconfig": null
});
});
</script>

</body>

</html>
